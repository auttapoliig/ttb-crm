<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Validate_Preferred_Branch</fullName>
    <active>true</active>
    <description>preferred branch is required if Sales amount per year (customer segment ) is SE,BB</description>
    <errorConditionFormula>IF(AND(
     RecordType.DeveloperName = &apos;Refer_within_Commercial&apos;,
     ISBLANK(RTL_Preferred_Branch__c)
     ),
       IF( OR(ISBLANK(RTL_Account_Name__c),NOT(RTL_Account_Name__r.RecordType.DeveloperName = &apos;Existing_Customer&apos; )),
           IF(OR(
                 TEXT(RTL_Sales_Amount_Per_Year__c) = &apos;SE : &lt;100 MB&apos;,
                 TEXT(RTL_Sales_Amount_Per_Year__c) = &apos;BB : 100-1,000 MB&apos;
                 )
           ,TRUE,FALSE),
           IF(OR(
           		 RTL_Account_Name__r.Core_Banking_Suggested_Segment__c = &apos;SE&apos;,
           		 RTL_Account_Name__r.Core_Banking_Suggested_Segment__c = &apos;BB&apos;
           		)
           ,TRUE,FALSE)
          )

	,FALSE)</errorConditionFormula>
    <errorDisplayField>RTL_Preferred_Branch__c</errorDisplayField>
    <errorMessage>“Preferred Branch” is required</errorMessage>
</ValidationRule>
