<apex:page standardcontroller="AcctPlanWallet__c" extensions="AccountPlanWalletDomainIExV2"
           doctype="html-5.0" showchat="false" showheader="{! !isConsoleMode}" sidebar="false" action="{!initiateWallet}"
           applybodytag="false" applyhtmltag="true" standardstylesheets="true">
    <head>
        <title>Customer Profile</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <meta name="author" content="Keattisak Chinburarat" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <!-- Static Resource -->
        <!--<apex:stylesheet value="{!URLFOR($Resource.bootstrapsf1, 'dist/css/bootstrap.min.css')}"/>  -->
        <apex:stylesheet value="{!URLFOR($Resource.bootstrapsf1, 'dist/css/bootstrap-namespaced.css')}" />
        <!--[if lt IE 9]><script src="../dist/js/ie8-responsive-file-warning.js"></script><![endif]-->
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <apex:includeScript value="{!$Resource.AccountPlan_HTML5shiv}"/>
          <apex:includeScript value="{!$Resource.AccountPlan_Respond}"/>
        <![endif]-->
        <apex:stylesheet value="{!$Resource.AccountPlanMaster}" />
        <style>
            .outputText {
                padding-top: 7px;
            }

            .outputQuestionnaireText {
                width: 15%;
            }
        </style>
    </head>
    <body>
        <c:AccountPlanHeader activetab="3" activesubtab="1"
                             groupid="{!GroupID}"
                             companyid="{!CompanyID}"
                             walletid="{!WalletID}"
                             percentage="{!Acctplancompletion.Account_Plan_Completion_Percentage__c }"
                             walletpercentage="{!Acctplancompletion.Step_3_Percentage__c }"
                             isminiview="{!isMiniView}"
                             ishasprodstrategy="{!ishasProdStrategy}"
                             ishasactionplan="{!isHasActionPlan}" />

        <div class="bootstrap-sf1 ">
            <div id="responseErrors"></div>
            <apex:form styleclass="form-horizontal">
                <apex:pageblock id="pgBlock">
                    <fieldset>
                        <legend>Wallet by domain</legend>
                    </fieldset>
                    <apex:pageblockbuttons location="both" style="float:left;margin-left:250px;"
                                           rendered="{!
                         isHasPermission
                         && if(companyProfile.OwnerID == $User.id 
                               || isSystemAdmin
                               || companyProfile.Account__r.OwnerID == $User.id,true,
                               if(isAccountTeamReadWrite,true,false)
                         )}">
                        <apex:commandbutton value="Edit" action="{!editpage}" styleclass="btn btn-success" rendered="{! !companyprofile.isPendingForApproval__c }" />

                        <span class="btn btn-default glyphicon glyphicon-lock"
                              rel="tooltip"
                              title="This record has been locked while pending Approval Process"
                              style="display:{!if(companyprofile.isPendingForApproval__c,'grid','none')};">Edit</span>

                    </apex:pageblockbuttons>
                    <div>
                        <table class="table">
                            <tbody>

                                <tr>
                                    <td class="forceBackground" style="border: none;text-align:left;" width="180px">
                                        Year
                                        <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                              data-toggle="tooltip"
                                              data-delay='{"show":"0", "hide":"100"}'
                                              data-animation="false"
                                              data-placement="bottom"
                                              title="{!$ObjectType.AcctPlanCompanyProfile__c.Fields.Year__c.inlineHelpText}" />


                                    </td>
                                    <td style="border: none;">
                                        <span class="form-control text-center calculate" style="width:400px;">
                                            <apex:outputfield value="{!companyprofile.Year__c}" />
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="forceBackground" style="border: none;text-align:left;">
                                        Customer Name
                                        <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                              data-toggle="tooltip"
                                              data-delay='{"show":"0", "hide":"100"}'
                                              data-animation="false"
                                              data-placement="bottom"
                                              title="{!$ObjectType.AcctPlanCompanyProfile__c.Fields.AccountName__c.inlineHelpText}" />

                                    </td>
                                    <td style="border: none;">
                                        <span class="form-control text-center calculate" style="width:400px;">
                                            <apex:outputfield value="{!companyprofile.AccountName__c}" />
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <header class="navbar navbar-default navbar-branded" role="banner">
                        <div class="panel-heading">
                            <div class="navbar-header ">
                                <a data-toggle="collapse" aria-expanded="true" href="#collapse1"
                                   class="navbar-brand navbar-foundation-logo">Collection Flow</a>
                            </div>
                        </div>
                    </header>
                    <div class="card collapse in panel-collapse" id="collapse1">
                        <div class="card-detail">
                            <!--  Section 1 -->
                            <fieldset>
                                <div>
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <div class="form-group">
                                            <div>
                                                <table class="table">
                                                    <tr>
                                                        <td class="text-left" style="border: none;">
                                                            <label class="control-label">Unit: THB</label>
                                                        </td>
                                                        <td style="border: none;">&nbsp;</td>
                                                        <td style="border: none;">&nbsp;</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;"></td>
                                                        <td class="text-right forceBackground" style="border: none;">
                                                            <label class="control-label">Sale portion (%)</label>
                                                        </td>
                                                        <td class="text-right forceBackground" style="border: none;">
                                                            <label class="control-label">Amount/Year</label>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            <label class="control-label">
                                                                Estimated
                                                                Sales (Year of account plan ) :
                                                            </label>
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.EstimatedSalesPercent__c}" styleclass="form-control" />

                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.EstimatedSalesPercent__c.inlineHelpText}" />

                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputtext value="{0, number, ###,##0}" style="border: none;" id="EstimatedSalesAmount__c">
                                                                <apex:param value="{!wallet.EstimatedSalesAmtPerYear__c}" />
                                                            </apex:outputtext>

                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.EstimatedSalesAmtPerYear__c.inlineHelpText}" />

                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            <label class="control-label">Total Sales Domestic :</label>
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalDomesticPercent__c }" styleclass="form-control" />
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalDomesticPercent__c.inlineHelpText}" />


                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalDomesticAmtPerYear__c }" styleclass="form-control" />
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalDomesticAmtPerYear__c.inlineHelpText}" />

                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            <label class="control-label">Total Sales Export :</label>
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalExportPercent__c  }" styleclass="form-control" />
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalExportPercent__c.inlineHelpText}" />
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalExportAmtPerYear__c  }" styleclass="form-control" />
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalExportAmtPerYear__c.inlineHelpText}" />

                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                     <div class="col-sm-12 col-md-6 col-lg-6">

                                 <!-- <p class="alert alert-warning" role="alert" style="
                                 display:{!if(isInitiateNewVersion,'block','none')}; 
                 float: left;padding: 8px;margin-left:30px;margin-top:40px;
                 width:600px;font-size:18px;padding-bottom: 30px;
                                 "> -->
                                                                <!-- Warning Message when old wallet transferring to new version  -->
                                                               <!-- <strong>Warning! </strong> 
                                                                <apex:outputText value=" {!msgWarningNewVersion}" escape="false" style="margin-top:40px;"/>

                                                                     </p>-->

                                                                     <div class="alert alert-info text-left" role="alert"
                                                                         style="width:100%;margin-right:25px;background-color: #FFFFCC;
                                                                         color:#000000;border-color:#FF9900;padding: 8px 20px 15px 20px;margin-top:40px;display:{!if(isInitiateNewVersion,'block','none')}; ">
                                                                         <i class="glyphicon glyphicon-warning-sign" 
                                                                         style="color: #ff9900;font-size: 24px;margin-right: 10px;top: 5px;padding-bottom: 8px;"></i>
                                                                         <strong>Warning : </strong> <br />
                                                                         <apex:outputText value=" {!msgWarningNewVersion}" escape="false" style="margin-top:42px;"/>
                                                                         </div>
                               </div>

                                </div>

                                <div>
                                    <br />
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <td class="text-left" style="border: none;">
                                                    <label class="control-label">Unit: THB</label>
                                                </td>
                                            </tr>
                                            <tr>

                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Collection
                                                    Method<br />(Domestic)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.Label__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    No. of
                                                    transactions<br />(Average per Month)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.NoOfTransaction__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Domestic
                                                    (Vol.)<br />(Average per Month)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.Volume__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    % Vol.
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.VolumePercent__c.inlineHelpText}" />
                                                </th>
                                                <th colspan="5" style="vertical-align: middle;">
                                                    %TMB Share
                                                    vs %Other Banks share
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Standard Fee<br />(Reference)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.StandardFee__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Fee Charge<br />(adjust by RM)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.FeeCharge__c.inlineHelpText}" />

                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Wallet Cash<br />Fee(Yearly)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.WalletFee__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="border-style:solid">
                                                    %Share -<br />TMB
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedTMB__c.inlineHelpText}" />

                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionDomestic.SharedBank1__c == null || otherBankCollectionDomestic.SharedBank1__c == '', 'none',otherBankCollectionDomestic.SharedBank1__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank1__c .inlineHelpText}" />

                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionDomestic.SharedBank2__c == null || otherBankCollectionDomestic.SharedBank2__c == '', 'none',otherBankCollectionDomestic.SharedBank2__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank2__c .inlineHelpText}" />

                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionDomestic.SharedBank3__c == null || otherBankCollectionDomestic.SharedBank3__c == '', 'none',otherBankCollectionDomestic.SharedBank3__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank3__c .inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionDomestic.SharedBank4__c == null || otherBankCollectionDomestic.SharedBank4__c == '', 'none',otherBankCollectionDomestic.SharedBank4__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank4__c .inlineHelpText}" />


                                                </th>

                                            </tr>
                                        </thead>
                                        <tbody> 
                                                     <apex:repeat value="{!fdetailMap['Collection Domestic']}" var="CDdetail" >
                                                          <apex:variable value="{!fheaderMap[CDdetail.Account_Plan_Flow_Header__c]}" var="CDHeader" /> 
                                                                    
                                                 <tr class="">
                                                     <td class="text-left forceBackground" >{!CDHeader.Label__c}
                                                    
                                                     </td>
                                                     
                                                     <td class="text-right">
                                                         
                                                   <apex:outputfield value="{!CDdetail.NoOfTransaction__c }"  
                                                       styleClass=" form-control text-right fillin"
                                                         rendered="{!
                                                         if(CDdetail.NoOfTransaction__c !=null,
                                                         if(CDdetail.NoOfTransaction__c >0,true,false),false)}" />
                                                  </td>
                                                      <td class="text-right">
                                                    <apex:outputfield value="{!CDdetail.Volume__c}" styleClass="form-control text-right"
                                                      style="width:70px;float:right;"
                                                      rendered="{!CDdetail.Volume__c !=null&& CDdetail.Volume__c !=0}" />
                                                  </td>
                                                       <td class="text-right">
                                                <apex:outputfield value="{!CDdetail.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                   rendered="{!
                                                   if( !CDHeader.isVolumePercent__c ,
                                                   if(CDdetail.VolumePercent__c !=null 
                                                      && CDdetail.VolumePercent__c !=0 ,true,false),false)}"   
                                                   style="width:70px;float:right;" />
                                                       
                                                <apex:outputfield value="{!CDdetail.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!CDHeader.isVolumePercent__c}"   style="width:70px;float:right;" />
                                                   
                                            </td>
                                                  <td class="text-right" >
                                               
                                                 <apex:outputfield value="{!CDdetail.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                    rendered="{!if(CDdetail.SharedTMB__c !=null,if(CDdetail.SharedTMB__c >0 ,true,false),false)}"
                                                     />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                                 
                                                 <apex:outputfield value="{!CDdetail.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                     style="width:70px;float:right;"
                                                     rendered="{!if(CDdetail.SharedBank1__c !=null,if(CDdetail.SharedBank1__c >0 ,true,false),false)}"
                                                      />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                                 <apex:outputfield value="{!CDdetail.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(CDdetail.SharedBank2__c !=null,if(CDdetail.SharedBank2__c >0 ,true,false),false)}"
                                                      />      
                          
                                            </td>        
                                             <td class="text-right" >
                                                 <apex:outputfield value="{!CDdetail.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(CDdetail.SharedBank3__c !=null,if(CDdetail.SharedBank3__c >0 ,true,false),false)}"
                                                     />      
                          
                                            </td>    
                                            <td class="text-right" >
                                                 <apex:outputfield value="{!CDdetail.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(CDdetail.SharedBank4__c !=null,if(CDdetail.SharedBank4__c >0 ,true,false),false)}"
                                                      />      
                          
                                                
                                            </td>        
                                                    
                                            
                                                     
                                              <td class="text-right {!if(CDdetail.StandardFee__c !=null && CDdetail.StandardFee__c != 0,'forceBackground','')}">
                                               <apex:outputfield value="{!CDdetail.StandardFee__c}"
                                                    rendered="{!if(
                                                    CDdetail.StandardFee__c !=null 
                                                    && CDdetail.StandardFee__c != 0 
                                                    && CDHeader.isFreeCharge__c 
                                                    && CDHeader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        CDHeader.isFreeCharge__c 
                                                        && CDdetail.StandardFee__c !=null 
                                                        && CDdetail.StandardFee__c != 0
                                                        && CDHeader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!CDdetail.StandardFee__c}" />
                                                         </apex:outputtext>
                                                </td> 
                                                                        
                                                <td class="text-right">
                                                 
                                                     <apex:outputfield value="{!CDdetail.FeeCharge__c}"
                                                    rendered="{!if(
                                                    CDdetail.FeeCharge__c !=null 
                                                    && CDHeader.isFreeCharge__c 
                                                    && CDHeader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        CDHeader.isFreeCharge__c 
                                                        && CDdetail.FeeCharge__c !=null 
                                                        && CDHeader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!CDdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                         
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                    <apex:outputfield value="{!CDdetail.FeeCharge__c}"
                                                    rendered="{!if(
                                                    CDdetail.FeeCharge__c !=null 
                                                    && CDdetail.FeeCharge__c != 0
                                                    && CDHeader.isFreeCharge__c 
                                                    && CDHeader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        CDHeader.isFreeCharge__c 
                                                        && CDdetail.FeeCharge__c !=null 
                                                        && CDdetail.FeeCharge__c != 0
                                                        && CDHeader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!CDdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ -->

                                                        
                                                       
                                                </td> 
                                                    
                                                     <td class="text-right">
                                                <apex:outputfield value="{!CDdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!CDdetail.Account_Plan_Flow_Header__r.isFreeCharge__c 
                                                    && CDdetail.FeeCharge__c !=null
                                                    && CDdetail.id !=null 
                                                    && if( CDdetail.CD_WalletFee__c !=null,true,false) }"   
                                                    style="width:70px;float:right;" />
                                                    
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                <apex:outputfield value="{!CDdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!CDdetail.Account_Plan_Flow_Header__r.isFreeCharge__c 
                                                    && CDdetail.FeeCharge__c !=null
                                                    && CDdetail.id !=null 
                                                    && if( CDdetail.CD_WalletFee__c !=null,if(CDdetail.CD_WalletFee__c>0,true,false ),false) }"   
                                                    style="width:70px;float:right;" />
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ --> 

                                                    <apex:outputtext value="{0, number, ###,##0}"
                                                        
                                                         rendered="{! CDdetail.ID ==null && CDHeader.isFreeCharge__c
                                                         && legacyWalletFeeMap[CDHeader.id] >0 }" >
                                                                        <apex:param value="{!legacyWalletFeeMap[CDHeader.id]}" />
                                                         </apex:outputtext>
                                            
                                                </td>     
                                                     
                                                     
                                                     </tr>
                                            
                                       </apex:repeat>
                                       <tr class="info endRow">
                                            <td class="text-left forceBackground">Total</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.SumOfCollectionDomesticVolumn__c}" /></td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.SumOfCollectionVolumnPercent__c }" /></td>
                                            <td colspan="6">&nbsp;</td>
                                            
                                            <td>&nbsp;</td><td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfCollectionWalletCashFee__c }"   />
                                            </td>
                                        </tr>
                  
                                    </tbody>
                                    </table>
                                </div>

                                <!-- Start >> 17Aug2015 :by DA -->
                                <br /><br />
                                <div>
                                    <table class="table table-striped table-hover" style="width:50%;">
                                        <thead>
                                            <tr>
                                                <th colspan="2">Domestic collection Method</th>

                                                <th>Business Opportunity</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:variable var="domesticStr" value="Domestic Collection Method" />
                                            <apex:repeat value="{!QuestionnaireMap[domesticStr]}" var="qm">
                                                <tr>

                                                    <td class="text-left">
                                                        {!qm.Question__c}
                                                        <br />
                                                        {!qm.Question_TH__c}
                                                    </td>
                                                    <td class="outputQuestionnaireText">
                                                        <apex:outputfield value="{!qm.Answer__c}" styleclass="form-control"
                                                                          style="display: initial !important;" />
                                                    </td>

                                                    <td class="text-left">
                                                        <apex:outputfield value="{!qm.Opportunity__c}" styleclass="form-control"
                                                                          rendered="{!if(qm.Answer__c=='Yes','true','false')}" />
                                                    </td>
                                                </tr>
                                            </apex:repeat>

                                        </tbody>
                                    </table>
                                </div>
                                <!-- End >> 17Aug2015 :by DA -->

                                <div>
                                    <br />
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <td class="text-left" style="border: none;">
                                                    <label class="control-label">Unit: THB</label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Collection
                                                    Method<br />(Export)

                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.Label__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Term<br />(Days)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.TermDays__c.inlineHelpText}" />

                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Collection pattern
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.Pattern__c.inlineHelpText}" />
                                                </th>
                                                          <th rowspan="2" style="vertical-align: middle;">No. of transactions
                                                  <br />Average per Month
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.NoOfTransaction__c.inlineHelpText}"  />       

                                            </th>    
                                                     
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Export
                                                    (Vol.)<br />Average per Month
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    % Vol.
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.VolumnPercent__c.inlineHelpText}" />
                                                </th>
                                                <th colspan="5">%TMB Share vs %Other Banks share</th>
                                                <th rowspan="2" style="vertical-align: middle">
                                                    Standard Fee<br />(Reference)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.StandardFee__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle">
                                                    Fee charge <br />(adjust by RM)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.FeeCharge__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle">
                                                    Wallet Trade<br />Fee (Yearly)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.WalletCashFee__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="border-style:solid">
                                                    %Share -<br />TMB
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedTMB__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionExport.SharedBank1__c == null || otherBankCollectionExport.SharedBank1__c == '', 'none',otherBankCollectionExport.SharedBank1__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank1__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionExport.SharedBank2__c == null || otherBankCollectionExport.SharedBank2__c == '', 'none',otherBankCollectionExport.SharedBank2__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank2__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionExport.SharedBank3__c == null || otherBankCollectionExport.SharedBank3__c == '', 'none',otherBankCollectionExport.SharedBank3__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank3__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankCollectionExport.SharedBank4__c == null || otherBankCollectionExport.SharedBank4__c == '', 'none',otherBankCollectionExport.SharedBank4__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank4__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        
                                                 <apex:repeat value="{!fdetailmap['Collection Export']}" var="CEdetail" >
                                                          <apex:variable value="{!fheaderMap[CEdetail.Account_Plan_Flow_Header__c]}" var="CEheader" /> 
                                                              
                                         
                                             
                                                 <tr class="">
                                                     <td class="text-left forceBackground" >{!CEheader.Label__c}
                                                     
                                                     </td>
                                                     
                                                     <td class="text-right">
                                               <apex:outputfield value="{!CEdetail.TermDays__c}"  styleClass=" form-control text-right fillin"
                                                       rendered="{!CEheader.isTerm__c }"  style="width:70px;float:right;" />
                         
                                                  </td>
                                                       
                                                       <td class="text-right">
                                                <apex:outputfield value="{!CEdetail.Pattern__c }" styleClass="form-control text-right fillin"
                                                    />  
                                                    </td>
                                                
                                                  <td class="text-right">
                                                <apex:outputfield value="{!CEdetail.NoOfTransaction__c }"  
                                                       styleClass=" form-control text-right fillin"
                                                         rendered="{! if(CEdetail.NoOfTransaction__c !=null,if(CEdetail.NoOfTransaction__c >0,true,false),false)}" />
                         
                                                  </td>
                                                       
                                                       <td class="text-right">
                                              <apex:outputfield value="{!CEdetail.Volume__c}" styleClass="form-control text-right"
                                                      style="width:70px;float:right;"
                                                      rendered="{!CEdetail.Volume__c !=null&& CEdetail.Volume__c !=0}" />
                                               </td>
                                                      
                                          <td class="text-right">
                                                <apex:outputfield value="{!CEdetail.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                   rendered="{!
                                                   if( !CEheader.isVolumePercent__c ,
                                                   if(CEdetail.VolumePercent__c !=null 
                                                      && CEdetail.VolumePercent__c !=0 ,true,false),false)}"   
                                                   style="width:70px;float:right;" />
                                                       
                                                <apex:outputfield value="{!CEdetail.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!CEheader.isVolumePercent__c}"   style="width:70px;float:right;" />
                                                                                                
                                                
                                            </td>
                                                   
                                             <td class="text-right" >
                                               
                                                 <apex:outputfield value="{!CEdetail.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(CEdetail.SharedTMB__c !=null,if(CEdetail.SharedTMB__c >0 ,true,false),false)}"

                                                     />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                                
                                                 <apex:outputfield value="{!CEdetail.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(CEdetail.SharedBank1__c !=null,if(CEdetail.SharedBank1__c >0 ,true,false),false)}"
 />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                               
                                                 <apex:outputfield value="{!CEdetail.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(CEdetail.SharedBank2__c !=null,if(CEdetail.SharedBank2__c >0 ,true,false),false)}"
 />      
                          
                                            </td>        
                                             <td class="text-right" >
                                                 
                                                 <apex:outputfield value="{!CEdetail.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(CEdetail.SharedBank3__c !=null,if(CEdetail.SharedBank3__c >0 ,true,false),false)}" />      
                          
                                            </td>    
                                            <td class="text-right" >
                                                 
                                                 <apex:outputfield value="{!CEdetail.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                   style="width:70px;float:right;"
                                                     rendered="{!if(CEdetail.SharedBank4__c !=null,if(CEdetail.SharedBank4__c >0 ,true,false),false)}"
 />      
                          
                                                
                                            </td>        
                                                    
                                            
                                                     
                                              <td class="text-right {!if(CEdetail.StandardFee__c !=null && CEdetail.StandardFee__c != 0,'forceBackground','')}">
                                               <apex:outputfield value="{!CEdetail.StandardFee__c}"
                                                    rendered="{!if(
                                                    CEdetail.StandardFee__c !=null 
                                                    && CEdetail.StandardFee__c != 0 
                                                    && CEheader.isFreeCharge__c 
                                                    && CEheader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        CEheader.isFreeCharge__c 
                                                        && CEdetail.StandardFee__c !=null 
                                                        && CEdetail.StandardFee__c != 0
                                                        && CEheader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!CEdetail.StandardFee__c}" />
                                                         </apex:outputtext>
                                                </td> 
                                                                        
                                                <td class="text-right"> 
                                                  <apex:outputfield value="{!CEdetail.FeeCharge__c}"
                                                    rendered="{!if(
                                                    CEdetail.FeeCharge__c !=null 
                                                    && CEheader.isFreeCharge__c 
                                                    && CEheader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        CEheader.isFreeCharge__c 
                                                        && CEdetail.FeeCharge__c !=null 
                                                        && CEheader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!CEdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                         
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                  <apex:outputfield value="{!CEdetail.FeeCharge__c}"
                                                    rendered="{!if(
                                                    CEdetail.FeeCharge__c !=null 
                                                    && CEdetail.FeeCharge__c != 0 
                                                    && CEheader.isFreeCharge__c 
                                                    && CEheader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        CEheader.isFreeCharge__c 
                                                        && CEdetail.FeeCharge__c !=null 
                                                        && CEdetail.FeeCharge__c != 0
                                                        && CEheader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!CEdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ -->


                                                
                                                       
                                                </td> 
                                                    
                                                     <td class="text-right">
                                                <apex:outputfield value="{!CEdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!CEdetail.Account_Plan_Flow_Header__r.isFreeCharge__c
                                                     && if( CEdetail.CD_WalletFee__c !=null,true,false)
                                                     }"   
                                                    style="width:70px;float:right;" />
                                                
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                <apex:outputfield value="{!CEdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!CEdetail.Account_Plan_Flow_Header__r.isFreeCharge__c
                                                     && if( CEdetail.CD_WalletFee__c !=null,if(CEdetail.CD_WalletFee__c>0,true,false ),false)
                                                     }"   
                                                    style="width:70px;float:right;" />
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ -->
                                            
                                                </td>
                                                     
                                                     
                                                     </tr>
                                            
                                       </apex:repeat>
                                        <tr class="info endRow">
                                            <td class="text-left forceBackground">Total</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.TotalExportAvgPerMonth__c}" /></td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.SumOfCollectionExportVolPercent__c}" /></td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfCollectionExportWalletTradeFee__c}" /></td>
                                        </tr>
                                    </tbody>
                                    </table>
                                </div>

                                <!-- Start >> 17Aug2015 :by DA -->
                                <br /><br />
                                <div>
                                    <table class="table table-striped table-hover" style="width:50%;">
                                        <thead>
                                            <tr>
                                                <th>Export collection method</th>
                                                <th></th>

                                                <th>Business Opportunity</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:variable var="exportstr" value="Export Collection Method" />
                                            <apex:repeat value="{!QuestionnaireMap[exportstr]}" var="qm">
                                                <tr>
                                                    <td class="text-left">
                                                        {!qm.Question__c}
                                                        <br />
                                                        {!qm.Question_TH__c}
                                                    </td>
                                                    <td class="outputQuestionnaireText">
                                                        <apex:outputfield value="{!qm.Answer__c}" styleclass="form-control"
                                                                          style="width:30%;display: initial !important;" />
                                                    </td>

                                                    <td class="text-left">
                                                        <apex:outputfield value="{!qm.Opportunity__c}" styleclass="form-control"
                                                                          rendered="{!if(qm.Answer__c=='Yes','true','false')}" />
                                                    </td>
                                                </tr>
                                            </apex:repeat>

                                        </tbody>
                                    </table>
                                </div>
                                <!-- End >> 17Aug2015 :by DA -->

                                <div>
                                    <br />
                                    <table class="table table-striped table-hover"
                                           style="width: 50%">
                                        <thead>
                                            <tr>
                                                <td class="text-left" style="border: none;">
                                                    <label class="control-label">Unit: THB</label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th>
                                                    Collection Currency
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CCY__c.inlineHelpText}" />

                                                </th>
                                                <th>
                                                    Portion (%)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CollectionPortion__c.inlineHelpText}" />
                                                </th>
                                                <th>
                                                    Amount per year (THB)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CollectionAmtPerYear__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:variable var="totalCollectionCCY" value="{!0}" />
                                            <apex:variable var="totalCollectionAmt" value="{!0}" />
                                            <apex:repeat value="{!CollectionList}" var="cl">
                                                <tr>
                                                    <td class="text-center"><apex:outputfield value="{!cl.CCY__r.ShortName__c}" /></td>
                                                    <td class="text-center"><apex:outputfield value="{!cl.CollectionPortion__c}" /></td>
                                                    <td class="text-right"><apex:outputfield value="{!cl.CollectionAmtPerYear__c}" /></td>
                                                </tr>
                                                <apex:variable var="totalCollectionCCY" value="{!totalCollectionCCY + cl.CollectionPortion__c}" />
                                                <apex:variable var="totalCollectionAmt" value="{!totalCollectionAmt + cl.CollectionAmtPerYear__c}" />
                                            </apex:repeat>
                                            <tr class="info endRow">
                                                <td class="text-center">Total</td>
                                                <td class="text-center"><apex:outputtext value="{!totalCollectionCCY}" />%</td>
                                                <td class="text-right">
                                                    <apex:outputtext value="{0, number, ###,##0}">
                                                        <apex:param value="{!totalCollectionAmt}" />
                                                    </apex:outputtext>
                                                </td>
                                            </tr>
                                        </tbody>

                                    </table>
                                </div>

                                <div>
                                    <br />
                                    <table class="table table-striped table-hover" style="width: 50%">
                                        <thead>

                                            <apex:variable var="exportstr" value="Collection Questionnaire" />
                                            <apex:variable var="internetbankingCollection" value="" />

                                            <apex:repeat value="{!QuestionnaireMap[exportstr]}" var="qm">
                                                <apex:variable var="internetbankingCollection" value="{!qm.Answer__c}" rendered="{!IF(qm.Answer__c == 'Yes' && qm.SEQ__c == 1,true,false)}" />
                                                <tr style="display:{!IF(internetbankingCollection == 'Yes' || qm.SEQ__c == 1,'table-row','none')};">
                                                    <td class="forceBackground text-center" style="width:120px;">
                                                        <apex:outputfield value="{!qm.Answer__c}" />
                                                    </td>
                                                    <td class="text-left">
                                                        {!qm.Question__c}
                                                        <br />
                                                        {!qm.Question_TH__c}
                                                    </td>
                                                </tr>
                                            </apex:repeat>
                                        </thead>
                                    </table>

                                </div>

                            </fieldset>




                        </div>
                    </div>
                    <br />
                    <header class="navbar navbar-default navbar-branded" role="banner">
                        <div class="panel-heading">
                            <div class="navbar-header ">
                                <a data-toggle="collapse" aria-expanded="true" href="#collapse2"
                                   class="navbar-brand navbar-foundation-logo">Payment Flow</a>
                            </div>
                        </div>
                    </header>
                    <div class="card collapse in panel-collapse" id="collapse2">
                        <div class="card-detail">
                            <!--  Section 1 -->

                            <fieldset>

                                <div>
                                    <div class="col-sm-12 col-md-12 col-lg-5">
                                        <div class="form-group">
                                            <div>
                                                <table class="table table-striped">
                                                    <tr>
                                                        <td class="text-left" style="border: none;">
                                                            <label class="control-label" wihth="50%">Unit: THB</label>
                                                        </td>
                                                        <td style="border: none;" width="25%">&nbsp;</td>
                                                        <td style="border: none;" wihth="25%">&nbsp;</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            % COGS (From estimated sales)
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.COGSPercent__c.inlineHelpText}" />


                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.COGSPercent__c}" />
                                                        </td>
                                                        <td class="text-right" style="border: none;"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            COGS (Amount: THB)

                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.COGSAmount__c.inlineHelpText}" />

                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.COGSAmount__c }" />
                                                        </td>
                                                        <td class="text-right" style="border: none;"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            Operating Expense (Amount: THB)
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.OperatingExpAmount__c.inlineHelpText}" />

                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.OperatingExpAmount__c }" />

                                                        </td>
                                                        <td class="text-right" style="border: none;"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            Total Payment (Amount: THB)
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPayment__c.inlineHelpText}" />
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalPayment__c }" />

                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            Amount per year<br />
                                                            (Unit: THB)
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            Total Payment Domestic

                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalPaymentDomesticPercent__c }" />

                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentDomesticPercent__c.inlineHelpText}" />
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalPaymentDomesticAmtPerYear__c}" />
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentDomesticAmtPerYear__c.inlineHelpText}" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            Total Payment Import

                                                        </td>
                                                        <td class="text-right" style="border: none;">

                                                            <apex:outputfield value="{!wallet.TotalPaymentImportPercent__c }" />
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentImportPercent__c.inlineHelpText}" />
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalPaymentImportAmtPerYear__c }" />
                                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                                  data-toggle="tooltip"
                                                                  data-delay='{"show":"0", "hide":"100"}'
                                                                  data-animation="false"
                                                                  data-placement="bottom"
                                                                  title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentImportAmtPerYear__c.inlineHelpText}" />
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <br />
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <td class="text-left" style="border: none;">
                                                    <label class="control-label">Unit: THB</label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th rowspan="2" style="vertical-align: middle;width:20%">
                                                    Payment Method<br />(Domestic)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.Label__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    No. of transactions<br />(Average per Month)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.NoOfTransaction__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Domestic (Vol.)<br />(Average per Month)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.Volume__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    % Vol.
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.VolumePercent__c.inlineHelpText}" />
                                                </th>
                                                <th colspan="5" style="vertical-align: middle;">%TMB Share vs %Other Banks share</th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Average<br />provident<br />fund (%)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.AvgProvidentFund__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Standard Fee<br />(Reference)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.StandardFee__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Fee charge <br />(adjusted by RM)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.FeeCharge__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Wallet Cash<br />fee (Yearly)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.WalletFee__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="border-style:solid">
                                                    %Share -<br />TMB
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedTMB__c.inlineHelpText}" />

                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentDomestic.SharedBank1__c == null || otherBankPaymentDomestic.SharedBank1__c == '', 'none',otherBankPaymentDomestic.SharedBank1__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank1__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentDomestic.SharedBank2__c == null || otherBankPaymentDomestic.SharedBank2__c == '', 'none',otherBankPaymentDomestic.SharedBank2__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank2__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentDomestic.SharedBank3__c == null || otherBankPaymentDomestic.SharedBank3__c == '', 'none',otherBankPaymentDomestic.SharedBank3__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank3__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentDomestic.SharedBank4__c == null || otherBankPaymentDomestic.SharedBank4__c == '', 'none',otherBankPaymentDomestic.SharedBank4__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank4__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                        </thead>
                                       <tbody>
                                        
                                                   <apex:repeat value="{!fdetailMap['Payment Domestic']}" var="PDdetail" >
                                                          <apex:variable value="{!fheaderMap[PDdetail.Account_Plan_Flow_Header__c]}" var="PDHeader" /> 
                                                         
                                         
                                             
                                                 <tr class="">
                                                     <td class="text-left forceBackground" >{!PDHeader.Label__c}
                                                     
                                                     </td>
                                                     
                                                     <td class="text-right">
                                                <apex:outputfield value="{!PDdetail.NoOfTransaction__c }"  
                                                       styleClass=" form-control text-right fillin"
                                                         rendered="{!if(PDdetail.NoOfTransaction__c !=null 
                                                         ,if(PDdetail.NoOfTransaction__c >0 && PDHeader.Account_Plan_Flow_Clone__c ==null,true,false),false)}" />
                         
                                                  </td>
                                                       
                                                       
                                                       
                                                       <td class="text-right">
                                              <apex:outputfield value="{!PDdetail.Volume__c}" styleClass="form-control text-right"
                                                      style="width:70px;float:right;"
                                                      rendered="{!PDdetail.Volume__c !=null&& PDdetail.Volume__c !=0}" />
                                               </td>
                                                      
                                          <td class="text-right">
                                                <apex:outputfield value="{!PDdetail.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                   rendered="{!
                                                   if( !PDHeader.isVolumePercent__c ,
                                                   if(PDdetail.VolumePercent__c !=null 
                                                      && PDdetail.VolumePercent__c !=0 ,true,false),false)}"   
                                                   style="width:70px;float:right;" />
                                                       
                                                <apex:outputfield value="{!PDdetail.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!PDHeader.isVolumePercent__c}"   style="width:70px;float:right;" />

                                                
                                            </td>
                                                   
                                            <td class="text-right" >
                                               
                                                 <apex:outputfield value="{!PDdetail.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                     style="width:70px;float:right;"
                                                     rendered="{!if(PDdetail.SharedTMB__c !=null,if(PDdetail.SharedTMB__c >0 ,true,false),false)}"
                                                      />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                                
                                                 <apex:outputfield value="{!PDdetail.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(PDdetail.SharedBank1__c !=null,if(PDdetail.SharedBank1__c >0 ,true,false),false)}"
                                                      />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                               
                                                 <apex:outputfield value="{!PDdetail.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(PDdetail.SharedBank2__c !=null,if(PDdetail.SharedBank2__c >0 ,true,false),false)}" />      
                          
                                            </td>        
                                             <td class="text-right" >
                                                 
                                                 <apex:outputfield value="{!PDdetail.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(PDdetail.SharedBank3__c !=null,if(PDdetail.SharedBank3__c >0 ,true,false),false)}" />      
                          
                                            </td>    
                                            <td class="text-right" >
                                                 
                                                 <apex:outputfield value="{!PDdetail.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                    style="width:70px;float:right;"
                                                     rendered="{!if(PDdetail.SharedBank4__c !=null,if(PDdetail.SharedBank4__c >0 ,true,false),false)}" />      
                          
                                                
                                            </td>      

                                             <td class="text-right">
                                                        <apex:outputfield value="{!PDdetail.AvgProvidentFund__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!PDHeader.isProvidentfund__c }" 
                                                        />
                                               </td>       
                                            
                                                     
                                              <td class="text-right {!if(PDdetail.StandardFee__c !=null && PDdetail.StandardFee__c != 0,'forceBackground','')}">
                                               <apex:outputfield value="{!PDdetail.StandardFee__c}"
                                                    rendered="{!if(
                                                    PDdetail.StandardFee__c !=null 
                                                    && PDdetail.StandardFee__c != 0 
                                                    && PDHeader.isFreeCharge__c 
                                                    && PDHeader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        PDHeader.isFreeCharge__c 
                                                        && PDdetail.StandardFee__c !=null 
                                                        && PDdetail.StandardFee__c != 0
                                                        && PDHeader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!PDdetail.StandardFee__c}" />
                                                         </apex:outputtext>
                                                </td> 
                                                                        
                                                <td class="text-right">

                                                 <apex:outputtext value="{0, number, ###,##0.00}" 
                                                    rendered="{!if(
                                                    PDdetail.FeeCharge__c !=null
                                                    && PDHeader.isFreeCharge__c 
                                                    && PDHeader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                >   <apex:param value="{!PDdetail.FeeCharge__c}" />
                                                </apex:outputtext>
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        PDHeader.isFreeCharge__c 
                                                        && PDdetail.FeeCharge__c !=null 
                                                        && PDHeader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!PDdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                         
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                    <apex:outputtext value="{0, number, ###,##0.00}" 
                                                    rendered="{!if(
                                                    PDdetail.FeeCharge__c !=null 
                                                    && PDdetail.FeeCharge__c != 0 
                                                    && PDHeader.isFreeCharge__c 
                                                    && PDHeader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                >   <apex:param value="{!PDdetail.FeeCharge__c}" />
                                                </apex:outputtext>
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        PDHeader.isFreeCharge__c 
                                                        && PDdetail.FeeCharge__c !=null 
                                                        && PDdetail.FeeCharge__c != 0
                                                        && PDHeader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!PDdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ -->
                                                       
                                                </td> 
                                                    
                                                     <td class="text-right">
                                                <apex:outputfield value="{!PDdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!PDdetail.Account_Plan_Flow_Header__r.isFreeCharge__c
                                                    &&  PDdetail.ID !=null

                                                     && if( PDdetail.CD_WalletFee__c !=null,true,false)
                                                    }"   
                                                    style="width:70px;float:right;" />
                                                    
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                <apex:outputfield value="{!PDdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!PDdetail.Account_Plan_Flow_Header__r.isFreeCharge__c
                                                    &&  PDdetail.ID !=null

                                                     && if( PDdetail.CD_WalletFee__c !=null,if(PDdetail.CD_WalletFee__c>0,true,false ),false)
                                                    }"   
                                                    style="width:70px;float:right;" />
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ -->


                                                     <apex:outputtext value="{0, number, ###,##0}"
                                                        
                                                         rendered="{! PDdetail.ID ==null 
                                                         && PDHeader.isFreeCharge__c
                                                         && legacyWalletFeeMap[PDHeader.id] >0 }" >
                                                                        <apex:param value="{!legacyWalletFeeMap[PDHeader.id]}" />
                                                         </apex:outputtext>
                                            
                                                </td>
                                                     
                                                     
                                                     </tr>
                                            
                                       </apex:repeat>
                                       <tr class="info endRow">
                                            <td class="forceBackground">Total</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentDomesticAvgPerMonth__c}"  styleClass="form-control text-right" />
                                                </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentDomesticVolPercent__c}"  styleClass="form-control text-right" />%
                                                </td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right"></td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentDomesticWalletCashFee__c}"  styleClass="form-control text-right fillin" />
                                                </td>
                                        </tr>      
                                    </tbody>
                                    </table>
                                </div>

                                <!-- Start >> 17Aug2015 :by DA -->
                                <br /><br />
                                <div>
                                    <table class="table table-striped table-hover" style="width:50%;" id="domesticpaymenttable">
                                        <thead>
                                            <tr>
                                                <th>Domestic payment method</th>
                                                <th></th>
                                                <th>Business Opportunity</th>
                                            </tr>

                                            <apex:variable var="rowNum" value="{!1}" />
                                            <apex:repeat value="{!DomesticPaymentSegment}" var="key">

                                                <tr>
                                                    <th class="text-left">{!key}</th>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                                <apex:repeat value="{!QuestionnaireMap[key]}" var="qnm">
                                                    <tr id="tr{!rowNum}">
                                                        <td class="text-left">
                                                            {!qnm.Question__c}
                                                            <br />
                                                            {!qnm.Question_TH__c}
                                                        </td>
                                                        <td class="outputQuestionnaireText Answer{!rowNum}">
                                                            <apex:outputfield value="{!qnm.Answer__c}" styleclass="form-control" rendered="{!if(qnm.Answer_Type__c =='Yes or No','true','false')}"
                                                                              style="width:30%;display: initial !important;" />
                                                            <apex:outputfield value="{!qnm.Optiontext__c}" styleclass="form-control " rendered="{!if(qnm.Answer_Type__c =='Text','true','false')}"
                                                                              style="width:30%;display: initial !important;" />
                                                            <apex:outputfield value="{!qnm.OptionNumber__c}" styleclass="form-control" rendered="{!if(qnm.Answer_Type__c =='Number','true','false')}"
                                                                              style="width:30%;display: initial !important;" />
                                                            <apex:outputfield value="{!qnm.OptionPercent__c}" styleclass="form-control" rendered="{!if(qnm.Answer_Type__c =='Percent','true','false')}"
                                                                              style="width:30%;display: initial !important;" />
                                                            <apex:outputfield value="{!qnm.OptionBank__r.Name}" styleclass="form-control " rendered="{!if(qnm.Answer_Type__c =='Bank','true','false')}"
                                                                              style="width:30%;display: initial !important;" />



                                                        </td>

                                                        <td class="text-left" id="Oppty{!rowNum}">
                                                            <apex:outputfield value="{!qnm.Opportunity__c}" styleclass="form-control"
                                                                              rendered="{!if((qnm.Answer__c!=null
                                                 || qnm.Optiontext__c !=null
                                                 || qnm.OptionNumber__C !=null
                                                 || qnm.OptionPercent__c !=null
                                                 || qnm.OptionBank__c !=null) && qnm.Answer__c =='Yes' ,'true','false')}" />
                                                        </td>
                                                    </tr>
                                                    <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                                </apex:repeat>

                                            </apex:repeat>

                                        </thead>
                                    </table>
                                </div>
                                <!-- End >> 17Aug2015 :by DA -->

                                <div>
                                    <br />
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <td class="text-left" style="border: none;">
                                                    <label class="control-label">Unit: THB</label>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Payment Method<br /> (Import)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Label__c.inlineHelpText}" />

                                                </th>
                                                <th rowspan="3" style="vertical-align: middle;">
                                                    Term<br />(Days)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Term__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="3" style="vertical-align: middle;">
                                                    Payment pattern
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Pattern__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    No. of<br />transactions<br /> Average<br />per Month
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.NoOfTransaction__c.inlineHelpText}" />

                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Import
                                                    (Vol.)<br /> Average<br />per Month
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Volume__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    % Vol.
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.VolumePercent__c.inlineHelpText}" />
                                                </th>
                                                <th colspan="5">%TMB Share vs %Other Banks share</th>
                                                <th rowspan="2" style="vertical-align: middle;">
                                                    Type of Fee
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Type_of_Fee__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align:middle;">
                                                    Standard Fee<br />(Reference)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.StandardFee__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align:middle;">
                                                    Fee charge<br />(adjusted by RM)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.FeeCharge__c.inlineHelpText}" />
                                                </th>
                                                <th rowspan="2" style="vertical-align:middle;">
                                                    Wallet TF Fee<br />(Yearly)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.WalletTFFee__c .inlineHelpText}" />
                                                </th>
                                            </tr>
                                            <tr>
                                                <th style="border-style:solid">
                                                    %Share -<br />TMB
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Label__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentImport.SharedBank1__c == null || otherBankPaymentImport.SharedBank1__c == '', 'none',otherBankPaymentImport.SharedBank1__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank1__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentImport.SharedBank2__c == null || otherBankPaymentImport.SharedBank2__c == '', 'none',otherBankPaymentImport.SharedBank2__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank2__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentImport.SharedBank3__c == null || otherBankPaymentImport.SharedBank3__c == '', 'none',otherBankPaymentImport.SharedBank3__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank3__c.inlineHelpText}" />
                                                </th>
                                                <th style="border-style:solid">
                                                    %Share -<br />{!IF(otherBankPaymentImport.SharedBank4__c == null || otherBankPaymentImport.SharedBank4__c == '', 'none',otherBankPaymentImport.SharedBank4__r.Name)}
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank4__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                        </thead>
                                       <tbody>
                                        
                                                   <apex:repeat value="{!fdetailMap['Payment Import']}" var="PIdetail" >
                                                          <apex:variable value="{!fheaderMap[PIdetail.Account_Plan_Flow_Header__c]}" var="PIheader" /> 
                                                         
                                     
                                         
                                             
                                                 <tr class="">
                                                      <td class="text-left {!if(!PIheader.isHideRow__c,'forceBackground','')} " >
                                                    <span style="display:{!if(!PIheader.isHideRow__c,'block','none')};">
                                                     {!PIheader.Label__c}
                                                     </span>
                                                     </td>
                                                     
                                                     <td class="text-right">
                                               <apex:outputfield value="{!PIdetail.TermDays__c  }"  styleClass=" form-control text-right fillin"
                                                       rendered="{!PIheader.isTerm__c  }"  style="width:70px;float:right;" />
                         
                                                  </td>
                                                       <td>
                                                        <apex:outputfield value="{!PIdetail.Pattern__c }"  styleClass=" form-control text-right fillin"
                                                      style="min-width: 120px;"
                                                      rendered="{!!PIheader.isHideRow__c}"

                                                       />
                         
                                                  </td>
                                                      <td class="text-center">
                                                             <apex:outputfield value="{!PIdetail.NoOfTransaction__c }"  
                                                       styleClass=" form-control text-right fillin"
                                                         rendered="{!
                                                        if(PIdetail.NoOfTransaction__c !=null,if(PIdetail.NoOfTransaction__c >0 && !PIheader.isHideRow__c,true,false),false)}" />
                                                                </td>
                                                       
                                                       
                                                       <td class="text-right">
                                              <apex:outputfield value="{!PIdetail.Volume__c}" styleClass="form-control text-right"
                                                      style="width:70px;float:right;display:{!if(!PIheader.isHideRow__c,'block','none')};" 
                                                      rendered="{!PIdetail.Volume__c !=null&& PIdetail.Volume__c !=0 && !PIheader.isHideRow__c}" />
                                               </td>
                                                      
                                          <td class="text-right">
                                          
                                                <apex:outputfield value="{!PIdetail.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                   rendered="{!
                                                   
                                                   if(PIdetail.VolumePercent__c !=null,
                                                      if( PIdetail.VolumePercent__c >0,true,false),false)}"  
                                                       style="width:70px;float:right;" />
                                                
                                                
                                            </td>
                                                   
                                             <td class="text-right" >
                                                 <apex:outputfield value="{!PIdetail.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                    
                                                    rendered="{!if(PIdetail.SharedTMB__c !=null,if(PIdetail.SharedTMB__c >0 ,true,false),false)}"  style="width:70px;float:right;" />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                                 <apex:outputfield value="{!PIdetail.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                    
                                                    rendered="{!if(PIdetail.SharedBank1__c !=null,if(PIdetail.SharedBank1__c >0 ,true,false),false)}"   style="width:70px;float:right;" />      
                          
                                                
                                            </td>
                                            <td class="text-right" >
                                                 <apex:outputfield value="{!PIdetail.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                    
                                                    rendered="{!if(PIdetail.SharedBank2__c !=null,if(PIdetail.SharedBank2__c >0 ,true,false),false)}"  style="width:70px;float:right;" />      
                          
                                            </td>        
                                             <td class="text-right" >
                                                 <apex:outputfield value="{!PIdetail.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                    
                                                    rendered="{!if(PIdetail.SharedBank3__c !=null,if(PIdetail.SharedBank3__c >0 ,true,false),false)}"  style="width:70px;float:right;" />      
                          
                                            </td>    
                                            <td class="text-right" >
                                                 <apex:outputfield value="{!PIdetail.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(PIdetail.SharedBank4__c !=null,if(PIdetail.SharedBank4__c >0 ,true,false),false)}"  style="width:70px;float:right;" />      
                          
                                                
                                            </td>        
                                             <td class="text-right">
                                                        <apex:outputfield value="{!PIheader.Type_of_Fee__c }" styleClass="form-control text-right fillin"
                                                        rendered="{!PIheader.Type_of_Fee__c  !=null }" 
                                                        />
                                               </td>       
                                            
                                                     
                                              <td class="text-right {!if(PIdetail.StandardFee__c !=null && PIdetail.StandardFee__c != 0,'forceBackground','')}">
                                               <apex:outputfield value="{!PIdetail.StandardFee__c}"
                                                    rendered="{!if(
                                                    PIdetail.StandardFee__c !=null 
                                                    && PIdetail.StandardFee__c != 0 
                                                    && PIheader.isFreeCharge__c 
                                                    && PIheader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0.00}"
                                                        
                                                        rendered="{!if(
                                                        PIheader.isFreeCharge__c 
                                                        && PIdetail.StandardFee__c !=null 
                                                        && PIdetail.StandardFee__c != 0
                                                        && PIheader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!PIdetail.StandardFee__c}" />
                                                         </apex:outputtext>
                                                </td> 
                                                                        
                                                <td class="text-right">

                                                  <apex:outputfield value="{!PIdetail.FeeCharge__c}"
                                                    rendered="{!if(
                                                    PIdetail.FeeCharge__c !=null 
                                                    && PIheader.isFreeCharge__c 
                                                    && PIheader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##.00}"
                                                        
                                                        rendered="{!if(
                                                        PIheader.isFreeCharge__c 
                                                        && PIdetail.FeeCharge__c !=null 
                                                        && PIheader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!PIdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                         
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                  <apex:outputfield value="{!PIdetail.FeeCharge__c}"
                                                    rendered="{!if(
                                                    PIdetail.FeeCharge__c !=null 
                                                    && PIdetail.FeeCharge__c != 0 
                                                    && PIheader.isFreeCharge__c 
                                                    && PIheader.Fee_Charge_Type__c =='Percent'
                                                    ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##.00}"
                                                        
                                                        rendered="{!if(
                                                        PIheader.isFreeCharge__c 
                                                        && PIdetail.FeeCharge__c !=null 
                                                        && PIdetail.FeeCharge__c != 0
                                                        && PIheader.Fee_Charge_Type__c =='Number'
                                                        ,'true','false')}" >
                                                                        <apex:param value="{!PIdetail.FeeCharge__c}" />
                                                         </apex:outputtext>
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ -->
                                                        
                                                       
                                                </td> 
                                                    
                                                     <td class="text-right">
                                                <apex:outputfield value="{!PIdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!PIdetail.Account_Plan_Flow_Header__r.isFreeCharge__c
                                                     && PIdetail.id !=null
                                                     && if( PIdetail.CD_WalletFee__c !=null,true,false)
                                                     }"   
                                                    style="width:70px;float:right;" />
                                                
                                                <!-- /******************** BAU Issue 00005057 2017-02-27 ********************/
                                                <apex:outputfield value="{!PIdetail.CD_WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!PIdetail.Account_Plan_Flow_Header__r.isFreeCharge__c
                                                     && PIdetail.id !=null
                                                     && if( PIdetail.CD_WalletFee__c !=null,if(PIdetail.CD_WalletFee__c>0,true,false ),false)
                                                     }"   
                                                    style="width:70px;float:right;" />
                                                /******************** BAU Issue 00005057 2017-02-27 ********************/ -->


                                                    <apex:outputtext value="{0, number, ###,##0}"
                                                        
                                                         rendered="{! PIdetail.ID ==null 
                                                         && PIheader.isFreeCharge__c
                                                         && legacyWalletFeeMap[PIheader.id] >0 }" >
                                                                        <apex:param value="{!legacyWalletFeeMap[PIheader.id]}" />
                                                         </apex:outputtext>
                                            
                                                </td>
                                                     
                                                     
                                                     </tr>
                                            
                                       </apex:repeat>
                                      <tr class="info endRow">
                                            <td class=" forceBackground">Total</td>                                            
                                            <td>&nbsp;</td>
                                            <td class="text-left"></td>
                                            <td >
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportNoOfTransaction__c}" styleClass="form-control text-right fillin" />
                                            </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportImportVol__c}" styleClass="form-control text-right fillin" />
                                            </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportVolPercent__c} " styleClass="form-control text-right fillin" />%
                                            
                                            </td>
                                            <td class="text-right">&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>                                            
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportWalletTFFee__c}" styleClass="form-control text-right fillin" />
                                            </td>
                                        </tr>
                                    </tbody>
                                    </table>
                                </div>

                                <div>
                                    <br />
                                    <table class="table table-striped table-hover" style="width: 50%">
                                        <thead>
                                            <apex:variable var="paymentimport" value="Payment Method Import" />
                                            <apex:variable var="internetbankingPayment" value="" />
                                            <apex:repeat value="{!QuestionnaireMap[paymentimport]}" var="qnm">
                                                <apex:variable var="internetbankingPayment" value="{!qnm.Answer__c}" rendered="{!IF(qnm.Answer__c == 'Yes' && qnm.SEQ__c == 1,true,false)}" />

                                                <tr style="display:{!IF(internetbankingPayment == 'Yes' || qnm.SEQ__c == 1,'table-row','none')};">
                                                    <td class="forceBackground text-center" style="width:120px;">
                                                        <apex:outputfield value="{!qnm.Answer__c}" />
                                                    </td>
                                                    <td class="text-left">
                                                        {!qnm.Question__c}
                                                        <br />
                                                        {!qnm.Question_TH__c}
                                                    </td>

                                                </tr>
                                            </apex:repeat>
                                        </thead>
                                    </table>

                                </div>

                                <div>
                                    <br />
                                    <table class="table table-striped table-hover"
                                           style="width: 50%">
                                        <thead>
                                            <tr>
                                                <th>
                                                    Payment Currency
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CCY__c.inlineHelpText}" />
                                                </th>
                                                <th>
                                                    Portion (%)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.PaymentPortion__c.inlineHelpText}" />
                                                </th>
                                                <th>
                                                    Amount per year (THB)
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                          data-toggle="tooltip"
                                                          data-delay='{"show":"0", "hide":"100"}'
                                                          data-animation="false"
                                                          data-placement="bottom"
                                                          title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.PaymentAmtPerYear__c.inlineHelpText}" />
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:variable var="totalPaymentCCY" value="{!0}" />
                                            <apex:variable var="totalPaymentAmt" value="{!0}" />

                                            <apex:repeat value="{!PaymentList}" var="pl">
                                                <tr>
                                                    <td class="text-center"><apex:outputfield value="{!pl.CCY__r.ShortName__c}" /></td>
                                                    <td class="text-center"><apex:outputfield value="{!pl.PaymentPortion__c}" /></td>
                                                    <td class="text-right"><apex:outputfield value="{!pl.PaymentAmtPerYear__c}" /></td>
                                                </tr>
                                                <apex:variable var="totalPaymentCCY" value="{!totalPaymentCCY + pl.PaymentPortion__c}" />
                                                <apex:variable var="totalPaymentAmt" value="{!totalPaymentAmt + pl.PaymentAmtPerYear__c}" />
                                            </apex:repeat>
                                            <tr class="info endRow">
                                                <td class="text-center">Total</td>
                                                <td class="text-center"><apex:outputtext value="{!totalPaymentCCY}" />%</td>
                                                <td class="text-right">
                                                    <apex:outputtext value="{0, number, ###,##0}">
                                                        <apex:param value="{!totalPaymentAmt}" />
                                                    </apex:outputtext>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>

                                <!-- Start >> 17Aug2015 :by DA -->
                                <div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-8 col-md-12 col-sm-12">
                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <th colspan="2">Liquidity Management</th>
                                                        <th>Business Opportunity</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!--   <tr>
                                                       <td style="width:70px;">
                                                             <apex:outputText value="Yes" styleClass="form-control"
                                                             style="width:30%;display: initial !important;" /></td>
                                                         <td style="text-align: left;">1. Does Customer has affiliated companies and has fund management by Parent company or Centralize Finance Team?</td>
                                                         <td style="text-align: left;width:25%">TMB Group Pooling</td>
                                                     </tr> -->
                                                    <apex:variable var="paymentimport" value="Liquidity Management" />
                                                    <apex:repeat value="{!QuestionnaireMap[paymentimport]}" var="qnm">

                                                        <tr>
                                                            <td style="width:70px;">
                                                                <apex:outputfield value="{!qnm.Answer__c}" styleclass="form-control"
                                                                                  style="width:30%;display: initial !important;" />
                                                            </td>
                                                            <td style="text-align: left;">
                                                                {!qnm.Question__C}
                                                                <br />
                                                                {!qnm.Question_TH__c}
                                                            </td>
                                                            <td class="text-left">
                                                                <apex:outputfield value="{!qnm.Opportunity__c}" styleclass="form-control"
                                                                                  rendered="{!if(qnm.Answer__c=='Yes','true','false')}" />
                                                            </td>
                                                        </tr>

                                                    </apex:repeat>



                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!-- End >> 17Aug2015 :by DA -->

                                <div>
                                    <br />
                                    <div class="col-lg-3 col-md-12 col-sm-12">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        Total Wallet Cash fee (yearly)
                                                        <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                              data-toggle="tooltip"
                                                              data-delay='{"show":"0", "hide":"100"}'
                                                              data-animation="false"
                                                              data-placement="bottom"
                                                              title="{!$ObjectType.AcctPlanWallet__c.Fields.SumOfWalletCashFee__c.inlineHelpText}" />

                                                    </th>
                                                    <td style="text-align:right">
                                                        <apex:outputfield value="{!wallet.SumOfWalletCashFee__c }" />

                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        Total Wallet TF fee (yearly)
                                                        <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip"
                                                              data-toggle="tooltip"
                                                              data-delay='{"show":"0", "hide":"100"}'
                                                              data-animation="false"
                                                              data-placement="bottom"
                                                              title="{!$ObjectType.AcctPlanWallet__c.Fields.SumOfWalletTFFee__c.inlineHelpText}" />

                                                    </th>
                                                    <td style="text-align:right">
                                                        <apex:outputfield value="{!wallet.SumOfWalletTFFee__c }" />

                                                    </td>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>

                                </div>
                            </fieldset>

                                     
       
                        </div>
                    </div>
                    <br />


                                   <!-- Start Section 3 -->
                        <header class="navbar navbar-default navbar-branded" role="banner">
                            <div class="panel-heading">
                                <div class="navbar-header ">
                                    <a data-toggle="collapse" aria-expanded="true" href="#collapse3"
                                    class="navbar-brand navbar-foundation-logo">Agents &#38; Securities Services</a>
                                </div>
                            </div>
                        </header>
                        <div class="card collapse in panel-collapse" id="collapse3">
                            <div class="card-detail">
                                <fieldset>
                                <!--<div class="col-sm-12 " style="width: 40%">
                                        <div class="form-group">
                                <div>
                                            <table class="table table-striped">
                                                                                  
                                        <tr>
                                            <td class="padding15 text-left forceBackground" style="border: none; width: 60%;">
                                                <label class="control-label"  style="padding-top: 0;">AUM (Asset Under Management) :
                                                   <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.Asset_Under_Management__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="padding15 text-right" style="border: none;">
                                                <apex:outputField value="{!acctplanwallet.Asset_Under_Management__c}" styleClass="form-control" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-left forceBackground" style="border: none;width: 60%;">
                                                <label class="control-label">AS Fee (%)
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.AS_Fee__c .inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="text-right" style="border: none;">
                                                <apex:outputfield value="{!acctplanwallet.AS_Fee__c }" styleClass="text-right form-control" />
                                            </td>
                                        </tr>
                                       <tr>
                                            <td class="text-left forceBackground" style="border: none;width: 60%;">
                                                <label class="control-label">AS Fee (Investment Fund)
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.AS_Fee_AUM__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="text-right" style="border: none;">
                                                <apex:outputfield value="{!acctplanwallet.AS_Fee_AUM__c }" styleClass="form-control" />
                                            </td>
                                        </tr>      
                                    </table>
                                            </div>
                                                </div>
                                                </div>-->
                                        <br/><br/>
                                                    
                                             <!-- AS Fee Section -->
                                       <div class="col-sm-12 " >
                                        <div class="form-group">
 
                                            <div>
                                             <table class="table table-striped" id="ASFeeTable" style="width: 80%">
                                    <thead>
                                        <tr>
                                            <th style="vertical-align: top;">
                                                AS Product/Service
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                                    data-animation="false" data-placement="bottom" 
                                                                    title="{!$ObjectType.Account_Plan_AS_Fee__c.Fields.AS_Product_Service__c.inlineHelpText}" />
                                                
                                            </th> 
                                            <th style="vertical-align: top;">
                                                Type of Fee
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                                    data-animation="false" data-placement="bottom" 
                                                                    title="{!$ObjectType.Account_Plan_AS_Fee__c.Fields.Type_of_Fee__c.inlineHelpText}" />
                                                
                                            </th>
                                            <th style="vertical-align: top;">
                                                Net Asset Value (NAV) (THB) 
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                                    data-animation="false" data-placement="bottom" 
                                                                    title="{!$ObjectType.Account_Plan_AS_Fee__c.Fields.Net_Asset_Value__c.inlineHelpText}" />
                                            </th>                      
                                           <th style="vertical-align: top;">
                                                AS Fee (%)
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                                    data-animation="false" data-placement="bottom" 
                                                                    title="{!$ObjectType.Account_Plan_AS_Fee__c.Fields.AS_Fee__c.inlineHelpText}" />
                                            </th>   
                                            <th style="vertical-align: top;">
                                                Fixed AS Fee
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                                    data-animation="false" data-placement="bottom" 
                                                                    title="{!$ObjectType.Account_Plan_AS_Fee__c.Fields.Fixed_AS_Fee__c.inlineHelpText}" />
                                            </th> 
                                            <th style="vertical-align: top;">
                                                Wallet AS Fee
                                                <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                                    data-animation="false" data-placement="bottom" 
                                                                    title="{!$ObjectType.Account_Plan_AS_Fee__c.Fields.Wallet_AS_Fee__c.inlineHelpText}" />
                                            </th>                      
                                        </tr>      
                                        
                                    </thead>
                                    <tbody>
                                    <apex:repeat value="{!ASFee}" var="crc">
                                    <tr>
                                            <td style="text-align: left;padding-left: 20px;"><apex:outputField value="{!crc.AS_Product_Service__c}"  styleClass="ProductInput"/></td>
                                            <td><apex:outputField value="{!crc.Type_of_Fee__c}"  /></td>
                                            <td class='text-right'><apex:outputField value="{!crc.Net_Asset_Value__c}"  rendered="{!crc.Type_of_Fee__c =='Percent'}"/></td>
                                            <td class='text-right'><apex:outputField value="{!crc.AS_Fee__c}"  rendered="{!crc.Type_of_Fee__c =='Percent'}"/></td> 
                                            <td class='text-right'><apex:outputField value="{!crc.Fixed_AS_Fee__c}" rendered="{!crc.Type_of_Fee__c =='Fixed'}"/></td>
                                            <td class='text-right'><apex:outputField value="{!crc.Wallet_AS_Fee__c}" /></td>        
                                            </tr>                              
                                        </apex:repeat>      
                                        <tr class="info endRow">
                                            <td class="forceBackground" colspan="2">ToTal</td>
                                            <td class="forceBackground text-right"><apex:outputtext value="{0, number, ###,##0}" style="border: none;" >
                                                                  <apex:param value="{!SumOfNetAssetValue}" />
                                                                </apex:outputtext></td>
                                            <td class="forceBackground text-right"><apex:outputtext value="{0, number, ###,##0.0000}" style="border: none;" >
                                                                  <apex:param value="{!SumOfASFee}" />
                                                                </apex:outputtext>%</td>
                                            <td class="forceBackground text-right"><apex:outputtext value="{0, number, ###,##0}" style="border: none;" >
                                                                  <apex:param value="{!SumOfFixedASFee}" />
                                                                </apex:outputtext></td>
                                            <td class="forceBackground text-right"><apex:outputtext value="{0, number, ###,##0}" style="border: none;">
                                                                  <apex:param value="{!SumOfWalletASFee}" />
                                                                </apex:outputtext></td>
                                        </tr>                                    
                                    </tbody>
                                    
                                </table>
 
            
 
                                            </div>
                                        </div>
                                    </div>
                                             
 
                                             <div class="col-sm-12 " style="width: 45%">
                                        <div class="form-group">
                                <div>
                                    <table class="table table-striped">
                                        <tr>
                                            <td class="padding15 text-left forceBackground" style="border: none; width: 60%;">
                                                <label class="control-label"  style="padding-top: 0;">Wallet AS Fee - Custodian :
                                                   <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.WalletASFee_Custodian__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="padding15 text-right" style="border: none;">
                                                <apex:outputfield value="{!wallet.WalletASFee_Custodian__c}" 
                                                styleClass="text-right form-control "/>
                                            </td>
                                        </tr>
                                        
                                        <tr>
                                            <td class="padding15 text-left forceBackground" style="border: none; width: 60%;">
                                                <label class="control-label"  style="padding-top: 0;"> Wallet AS Fee - Fund Supervisory :
                                                   <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.WalletASFee_FundSupervisory__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="padding15 text-right" style="border: none;">
                                                <apex:outputfield value="{!wallet.WalletASFee_FundSupervisory__c}" 
                                                styleClass="text-right form-control "/>
                                            </td>
                                        </tr>
                                        
                                    <tr>
                                            <td class="padding15 text-left forceBackground" style="border: none; width: 60%;">
                                                <label class="control-label"  style="padding-top: 0;">Wallet AS Fee - Middle Office :
                                                   <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.WalletASFee_MiddleOffice__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="padding15 text-right" style="border: none;">
                                                <apex:outputfield value="{!wallet.WalletASFee_MiddleOffice__c}" 
                                                styleClass="text-right form-control "/>
                                            </td>
                                        </tr>
                                        
                                        <tr>
                                            <td class="padding15 text-left forceBackground" style="border: none; width: 60%;">
                                                <label class="control-label"  style="padding-top: 0;">Wallet AS Fee - Agency Service :
                                                   <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.WalletASFee_AgencyService__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="padding15 text-right" style="border: none;">
                                                <apex:outputfield value="{!wallet.WalletASFee_AgencyService__c}" 
                                                styleClass="text-right form-control "/>
                                            </td>
                                        </tr>
                                        
                                        <!-- End Product -->                                          
                                        <tr>
                                            <td class="padding15 text-left forceBackground" style="border: none; width: 60%;">
                                                <label class="control-label"  style="padding-top: 0;">Wallet AS Fee -  Registrar &amp; Payment Agent:
                                                   <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.WalletASFee_RegistrarPaymentAgent__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="padding15 text-right" style="border: none;">
                                                <apex:outputfield value="{!wallet.WalletASFee_RegistrarPaymentAgent__c}" 
                                                styleClass="text-right form-control "/>
                                            </td>
                                        </tr>
                                        <tr><td>&nbsp;</td></tr>                                          
                                        <tr>
                                            <td class="padding15 text-left forceBackground" style="border: none; width: 60%;">
                                                <label class="control-label"  style="padding-top: 0;">Total Wallet AS Fee :
                                                   <span class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-delay='{"show":"0", "hide":"100"}'
                                                    data-animation="false" data-placement="bottom" 
                                                    title="{!$ObjectType.AcctPlanWallet__c.Fields.SumOfWalletASFee__c.inlineHelpText}" /> 
                                                </label>
                                            </td>                                                    
                                            <td class="padding15 text-right" style="border: none;">
                                                <apex:outputfield value="{!wallet.SumOfWalletASFee__c}" 
                                                styleClass="text-right form-control "/>
                                            </td>
                                        </tr>
                                        
                                    </table>
                                    </div>
                                    </div>
                                    </div>        
                                </fieldset>       
                            </div>
                       </div>                 
                     <!-- End Section 3 -->    
                </apex:pageblock>
            </apex:form>
        </div>


    </body>
    <apex:includescript value="{!$Resource.AccountPlan_JqueryScript}" />
    <apex:includescript value="{!$Resource.AccountPlan_Bootstrap}" />
    <apex:includescript value="{!$Resource.AccountPlan_Mustache}" />
    <apex:includescript value="/support/console/22.0/integration.js" />
    <script type="text/javascript">
         var $j = jQuery.noConflict();
              $j(document).ready( function () {

               $j('[data-toggle="tooltip"]').tooltip();

                         var dependsquestiontr10 = "#domesticpaymenttable #tr10";
                             var dependsquestiontr11 = "#domesticpaymenttable #tr11";
               var dependsquestiontr12 = "#domesticpaymenttable #tr12";
                             var dependsquestiontr13 = "#domesticpaymenttable #tr13";
                             var dependsquestion9 = "#domesticpaymenttable .Answer9";
                         var dependsOpp11 = "#domesticpaymenttable #Oppty11";
                        var dependsOpp12 = "#domesticpaymenttable #Oppty12";
                        var dependsOpp13 = "#domesticpaymenttable #Oppty13";
                    if($j(dependsquestion9).text().trim()=='Yes'){
                        $j(dependsquestiontr12).addClass("display-none");
                         $j(dependsquestiontr13).addClass("display-none");
                        $j(dependsOpp11).removeClass("display-none");

                    }else if($j(dependsquestion9).text().trim()=='No'){
                        $j(dependsOpp12).removeClass("display-none");
                         $j(dependsOpp13).removeClass("display-none");

                         $j(dependsquestiontr10).addClass("display-none");
                         $j(dependsquestiontr11).addClass("display-none");
                    }else{
                         $j(dependsquestiontr10).addClass("display-none");
                         $j(dependsquestiontr11).addClass("display-none");
                         $j(dependsquestiontr12).addClass("display-none");
                         $j(dependsquestiontr13).addClass("display-none");
                    }


            });

    //Sets the title of the current tab to "Case Transactions Detail"
        window.onload = function setTitleConsole(){
            setTitle();
        }
        //Sets the title of the current tab to "Case Transactions Detail"
        function setTitle() {
            sforce.console.setTabTitle('Wallet by Domain');
        }
    </script>
</apex:page>