<apex:page standardController="AcctPlanWallet__c" extensions="AccountPlanWalletDomainIEx"
    docType="html-5.0" showChat="false" showHeader="{! !isConsoleMode}" sidebar="false"
    applyBodyTag="false" applyHtmlTag="true" standardStylesheets="true">
    <head>
        <title></title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <meta name="author" content="Keattisak Chinburarat" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />

        <!-- Static Resource -->
        <!--<apex:stylesheet value="{!URLFOR($Resource.bootstrapsf1, 'dist/css/bootstrap.min.css')}"/>  -->
        <apex:stylesheet value="{!URLFOR($Resource.bootstrapsf1, 'dist/css/bootstrap-namespaced.css')}" />
        <!--[if lt IE 9]><script src="../dist/js/ie8-responsive-file-warning.js"></script><![endif]-->

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <apex:includeScript value="{!$Resource.AccountPlan_HTML5shiv}"/>
          <apex:includeScript value="{!$Resource.AccountPlan_Respond}"/>
        <![endif]-->
		<apex:stylesheet value="{!$Resource.AccountPlanMaster}" />
        <style>
        
        
        .outputText {
            padding-top: 7px;
        }
        
        .outputQuestionnaireText {
            width: 15%;
        }

        </style>
    </head>

    <body>
        
        <div class="bootstrap-sf1 ">
            <div id="responseErrors"></div>
            <apex:form styleClass="form-horizontal">
                <apex:pageBlock id="pgBlock">
                   <apex:actionFunction name="rerendercurrency" action="{!loadCurrency}" reRender="collectionblock,paymentblock,CollectionCurrencypanel,PaymentCurrencypanel"   />
                  <apex:actionstatus id="status">
                                                    <apex:facet name="start">
                                                        <div class='overlay' style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.75; z-index: 1000; background-color: #ededed;">
                                                            &nbsp;
                                                        </div>
                                                        <div style="position: fixed; left: 0; top: 0; bottom: 0; right: 0; z-index: 1001; margin: 15% 50%">
                                                            <img src="/img/loading32.gif" />
                                                        </div>
                                                    </apex:facet>
                          </apex:actionstatus>
                <fieldset>
                    <legend>Wallet by domain</legend>
                </fieldset>
                <div class="form-group">
					<div style="text-align: center;">
                       <apex:pageBlockButtons location="both" style="float:left;margin-left:200px;" >
                <apex:commandButton value="Save" action="{!Save}" styleclass="btn btn-success" rerender="result" status="status" />
                <apex:commandButton value="Cancel" action="{!cancel}" styleclass="btn btn-success" onclick="if(!confirm('Are you sure you want to exit this screen without saving?')) return false;" />
            </apex:pageBlockButtons>
               
					<apex:PageBlockSection id="result" columns="1" >
                    <apex:pageMessages /> 
                </apex:PageBlockSection>                        			 
					</div>
				</div>
                <header class="navbar navbar-default navbar-branded" role="banner">
                    <div class="panel-heading">
                        <div class="navbar-header ">
                            <a data-toggle="collapse" aria-expanded="true" href="#collapse1"
                                class="navbar-brand navbar-foundation-logo"> Collection Flow </a>
                        </div>
                    </div>
                </header>
                <div class="card collapse in panel-collapse" id="collapse1">
                    <div class="card-detail">
                        <!--  Section 1 -->
                        <fieldset>
                           
                            <div>

                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <div class="form-group">

                                            <div>
                                         
                                                <table class="table">
                                                    <tr>
                                                        <td class="text-left" style="border: none;"><label
                                                            class="control-label">Unit: THB</label></td>
                                                        <td style="border: none;">&nbsp;</td>
                                                        <td style="border: none;">&nbsp;</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            
                                                        </td>
                                                        <td class="text-right forceBackground" style="border: none;">
                                                            <label class="control-label">Sale portion (%)</label>
                                                        </td>
                                                        <td class="text-right forceBackground" style="border: none;">
                                                            <label class="control-label">Amount/Year</label>
                                                        </td>
                                                    </tr>                                          
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            <label  class="control-label">Estimated
                                                                Sales (Year of account plan ) : 
                                                            </label>
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            
                                                            
                                                            <apex:outputfield value="{!wallet.EstimatedSalesPercent__c}" styleClass="form-control"
                                                                 />
                                                                	<span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                                  
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.EstimatedSalesPercent__c.inlineHelpText}" />      
                                                                </td>
                                                        <td style="border: none;">
                                                                                     <apex:inputfield value="{!wallet.EstimatedSalesAmtPerYear__c}" styleClass="{!if(wallet.EstimatedSalesAmtPerYear__c == null || wallet.EstimatedSalesAmtPerYear__c == 0,'danger','success')} form-control text-right "
                                                                 onchange="checkIshasValue(this,'');" style="width:90%;float:left;" />
                                                                          <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                                            style="float: left;margin-left: 7px;margin-top: 10px;"
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.EstimatedSalesAmtPerYear__c.inlineHelpText}" />
                                    
                                                                     </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            <label 
                                                            class="control-label">Total Sales Domestic :</label>
                                                        </td>
                                                        <td style="border: none;">
                                                            <!-- onchange="checkIshasValue(this,'CollectionDomestictable');" -->
                                                            <apex:inputfield value="{!wallet.TotalDomesticPercent__c}" styleClass="{!if(wallet.TotalDomesticPercent__c == null ,'danger','success')} form-control text-right "
                                                                style="width:90%;float:left;"  onchange="checkIshasValue(this,'TotalDomesticPercent');"/>
                                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                                    style="float: left;margin-left: 7px;margin-top: 10px;"
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalDomesticPercent__c.inlineHelpText}" />     
                                                         
                                                         
                                                            </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalDomesticAmtPerYear__c}" styleClass="form-control"
                                                                 />
                                                                 <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalDomesticAmtPerYear__c.inlineHelpText}" />     
                                                                </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="text-left forceBackground" style="border: none;">
                                                            <label 
                                                            class="control-label">Total Sales Export :</label>
                                                        </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalExportPercent__c  }" styleClass="form-control"
                                                                 />
                                                                 <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalExportPercent__c.inlineHelpText}" />     
                                                                </td>
                                                        <td class="text-right" style="border: none;">
                                                            <apex:outputfield value="{!wallet.TotalExportAmtPerYear__c  }" styleClass="form-control"
                                                                />
                                                                 <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalExportAmtPerYear__c.inlineHelpText}" />     
                                                                </td>
                                                    </tr>
                                                </table> 
                                                          
                                            </div>

                                    </div>
                                </div>
                            </div>
                                                        
                            <div>
                                <br/>
                                                                
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <td class="text-left" style="border: none;"><label
                                                        class="control-label">Unit: THB</label>
                                            </td>
                                            <td colspan="2">
                                           		<p id="CollectionDomestic" class="bg-danger" style="display:{!if(isRequiredCollectionMethod,'block','none')}; float: left;padding: 8px;border: 1px solid #E28888;margin-left:10px;">
                                                 	If Sales Domestic is more than 0, there must be at least one product with %Vol. of more than 0

                                             	</p>
                                                    
                                               <p id="BillPayment" class="bg-danger" style="display:{!if(isRequiredBillPayment,'block','none')}; float: left;padding: 8px;border: 1px solid #E28888;margin-left:10px;margin-top:10px;">
            
                                               Conditional Field - If %Vol of Bill Payment is more than 0%, No. of transactions is required    
                                               	</p>
                                            </td>                
                                        </tr>
                                        <tr>
                
                                            <th rowspan="2" style="vertical-align: middle;">Collection
                                                                Method<br />(Domestic)
                                                                  <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.Label__c.inlineHelpText}" />       
                                                                </th>
                                            <th rowspan="2" style="vertical-align: middle;">No. of
                                                                transactions<br />(Average per Month)
                                                                  <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.NoOfTransaction__c.inlineHelpText}" />       

                                                                </th>
                                            <th rowspan="2" style="vertical-align: middle;">Domestic
                                                                (Vol.)<br />(Average per Month)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.Volume__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">% Vol.
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.VolumePercent__c.inlineHelpText}" />       

                                            </th>
                                            <th colspan="5" style="vertical-align: middle;">%TMB Share
                                                                vs %Other Banks share</th>
                                            <th rowspan="2" style="vertical-align: middle;">Standard Fee<br />(Reference)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.StandardFee__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Fee Charge<br/>(adjust by RM)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.FeeCharge__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Wallet Cash<br />Fee(Yearly)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.WalletFee__c.inlineHelpText}" />       

                                            </th>
                                        </tr>
                                        <tr>
                                            <th style="vertical-align: middle; padding:15px;">%Share-<br />TMB
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedTMB__c.inlineHelpText}" />       

                                            </th>
                                            	<th style="padding: 15px;">%Share -
                                                    
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank1__c.inlineHelpText}" /> 
                                                         <br />
                                                	<apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankCollectionDomestic.SharedBank1__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                        
                                                </th>  
                                                <th  style="padding: 15px;">%Share -
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank2__c.inlineHelpText}" />   
                                                         <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankCollectionDomestic.SharedBank2__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                                                                       </th>
                                                <th  style="padding: 15px;">%Share -
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank3__c.inlineHelpText}" />     
                                                         <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankCollectionDomestic.SharedBank3__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                         

                                                </th>
                                               <th  style="padding: 15px;">%Share -
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionDomestic__c.Fields.SharedBank4__c.inlineHelpText}" />       
                                                         <br />

                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankCollectionDomestic.SharedBank4__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                        
                                                </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                         <apex:repeat value="{!CollectionDomesticMetholdLabel}" var="key" >
                                             <apex:repeat value="{!CollectionDomesticMap[key]}" var="cdm" >
                                                 <tr class="">
                                            <td class="text-left forceBackground">{!key}</td>
                                            <td class="text-right">
                                                <apex:inputfield value="{!cdm.NoOfTransaction__c}"  styleClass=" form-control text-right fillin"
                                                       rendered="{!if(key=='3) Bill Payment','true',false)}"  style="width:70px;float:right;" />
                                               
                                            </td>
                                            <td class="text-right">
                                              <apex:outputfield value="{!cdm.Volume__c}" styleClass="form-control text-right"
                                                      style="width:70px;float:right;" rendered="{!cdm.Volume__c !=null&& cdm.Volume__c !=0}" />
                                               
                                            </td>
                                            <td class="text-right">
                                                <apex:inputfield value="{!cdm.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(key!='2) Cheque' && key!='5) Card','true',false)}"   style="width:70px;float:right;" />
                                                <apex:outputfield value="{!cdm.VolumePercent__c}" styleClass="form-control text-right fillin"
                                                   rendered="{!if(key=='2) Cheque' || key=='5) Card',if(cdm.VolumePercent__c !=null && cdm.VolumePercent__c !=0 ,true,false),false)}"   style="width:70px;float:right;" />
                                                
                                            </td>
                                            <td class="text-right">
                                                 <apex:inputfield value="{!cdm.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(key!='2) Cheque' && key!='5) Card','true',false)}"   style="width:70px;float:right;" />
                                                 <apex:outputfield value="{!cdm.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(key=='2) Cheque' || key=='5) Card',if(cdm.SharedTMB__c !=null && cdm.SharedTMB__c !=0 ,true,false),false)}"  style="width:70px;float:right;" />      
                                                
                                            </td>
                                            <td class="text-right">
                                                 <apex:inputfield value="{!cdm.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(key!='2) Cheque' && key!='5) Card','true',false)}"   style="width:70px;float:right;" />
                                                     <apex:outputfield value="{!cdm.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                     rendered="{!if(key=='2) Cheque' || key=='5) Card',if(cdm.SharedBank1__c !=null && cdm.SharedBank1__c !=0 ,true,false),false)}"   style="width:70px;float:right;" />          
                                             </td>
                                            <td class="text-right">
                                                <apex:inputfield value="{!cdm.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(key!='2) Cheque' && key!='5) Card','true',false)}"   style="width:70px;float:right;" />
                                            	<apex:outputfield value="{!cdm.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                 rendered="{!if(key=='2) Cheque' || key=='5) Card',if(cdm.SharedBank2__c !=null && cdm.SharedBank2__c !=0 ,true,false),false)}"  style="width:70px;float:right;" />
                                                </td>
                                            <td class="text-right">
                                            <apex:inputfield value="{!cdm.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(key!='2) Cheque' && key!='5) Card','true',false)}"   style="width:70px;float:right;" />
                                            <apex:outputfield value="{!cdm.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                   rendered="{!if(key=='2) Cheque' || key=='5) Card',if(cdm.SharedBank3__c !=null && cdm.SharedBank3__c !=0 ,true,false),false)}" style="width:70px;float:right;" />
                                            </td>
                                            <td class="text-right">
                                                <apex:inputfield value="{!cdm.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(key!='2) Cheque' && key!='5) Card','true',false)}"   style="width:70px;float:right;" />
                                                <apex:outputfield value="{!cdm.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                   rendered="{!if(key=='2) Cheque' || key=='5) Card',if(cdm.SharedBank4__c !=null && cdm.SharedBank4__c !=0 ,true,false),false)}"    style="width:70px;float:right;" />        
                                            </td>
                                           <td class="text-right {!if(cdm.StandardFee__c !=null && cdm.StandardFee__c != 0,'forceBackground','')}">
                                                
                                               <apex:outputfield value="{!cdm.StandardFee__c}"
                                                    rendered="{!if(cdm.StandardFee__c !=null && cdm.StandardFee__c != 0 && key!='3) Bill Payment' ,'true','false')}"
                                                />
                                                        
                                                        <apex:outputtext value="{0, number, ###,##0}"
                                                        rendered="{!if(key=='3) Bill Payment' && cdm.StandardFee__c !=null && cdm.StandardFee__c != 0 ,'true','false')}" >
                                                                        <apex:param value="{!cdm.StandardFee__c}" />
                                                         </apex:outputtext>
                                                </td>
                                            <td class="text-right">
                                                 <apex:inputfield value="{!cdm.FeeCharge__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(cdm.StandardFee__c !=null && cdm.StandardFee__c != 0,'true','false')}"   style="width:70px;float:right;" />
                                            
                                                </td> 
                                            <td class="text-right">
                                                <apex:outputfield value="{!cdm.WalletFee__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(cdm.StandardFee__c !=null && cdm.StandardFee__c != 0,'true','false')}"   style="width:70px;float:right;" />
                                            
                                                </td>
                                            </tr>
                                                    
                                                 </apex:repeat>
                                             </apex:repeat>
                                       
                                        <tr class="info endRow">
                                            <td class="text-left forceBackground">Total</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.SumOfCollectionDomesticVolumn__c}" /></td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.SumOfCollectionVolumnPercent__c }" /></td>
                                            <td class="text-right">&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                             <td>&nbsp;</td>
                                            <td>&nbsp;</td><td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfCollectionWalletCashFee__c }"  />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                                                                                  
                            <!-- Start >> 17Aug2015 :by DA -->
                            <br /><br /> 
                            <div>
                                <table class="table table-striped table-hover" style="width:50%;" id="domesticcollectiontable">                                   
                                    <thead>
                                        <tr >
                                            <th colspan="2">Domestic collection Method</th>
                                            
                                            <th style="width:150px;">Business Opportunity</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                                <apex:variable var="rowNum" value="{!1}" />
                                         <apex:variable var="domesticStr" value="Domestic Collection Method" />     
                                             <apex:repeat value="{!QuestionnaireMap[domesticStr]}" var="qm" >                                                
                                       <tr >
                                                <td style="width:120px;" >
                                              <apex:inputField value="{!qm.Answer__c}" 
                                              styleClass=" form-control fillin" style="height:30px;" onchange="showOpportunity(this,{!rowNum},'domesticcollectiontable');" />
                                                </td>
                                                <td class="forceBackground text-left" >{!qm.Question__c}
                                                <br />
                                                {!qm.Question_TH__c}</td>
                                              <td style="width: 150px;"  id="Oppty{!rowNum}"
                                              class="text-left {!IF(qm.Answer__c == 'Yes','','display-none')}">
                                                  {!qm.Opportunity__c}
                                              </td>
                                            </tr>
                                              <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                            </apex:repeat>
                                            
                                    </tbody>                                    
                                </table>
                            </div>                            
                            <!-- End >> 17Aug2015 :by DA -->
                            
                            <div>
                                <br />
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <td class="text-left" style="border: none;"><label
                                                        class="control-label">Unit: THB</label>
                                            </td>
                                            <td colspan="3">
                                           		<p id="CollectionExportError" class="bg-danger" style="display:{!if(isRequiredColletionExport ,'block','none')}; float: left;padding: 8px;border: 1px solid #E28888;margin-left:10px;">
                                                 	If Sales Export is more than 0, there must be at least one product with %Vol. of more than 0

                                             	</p>
                                            </td>   
                                        </tr>
                                        <tr>
                                            <th rowspan="2" style="vertical-align: middle;">Collection
                                                Method<br />(Export)
                                                  <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.Label__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Term<br />(Days)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.TermDays__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Collection pattern
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.Pattern__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Export
                                                (Vol.)<br />Average per Month
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.Volumn__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">% Vol.
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.VolumnPercent__c.inlineHelpText}" />       
</th>
                                            <th colspan="5">%TMB Share vs %Other Banks share</th>
                                            <th rowspan="2" style="vertical-align: middle">Standard Fee<br />(Reference)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.StandardFee__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle">Fee charge <br />(adjust by RM)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.FeeCharge__c.inlineHelpText}" />       

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle">Wallet Trade<br />Fee (Yearly)
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.WalletCashFee__c.inlineHelpText}" />       

                                            </th>
                                        </tr>
                                        <tr>
                                            <th style="vertical-align: middle; padding: 15px;">%Share-<br />TMB
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedTMB__C.inlineHelpText}" />       

                                            </th>
                                            <th style="padding: 15px;">%Share -
                                                  <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank1__c.inlineHelpText}" />       

                                                <br />
                                                	<apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankCollectionExport.SharedBank1__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>  
                                                <th  style="padding: 15px;">%Share -
                                                      <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank2__c.inlineHelpText}" />       

                                                    <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankCollectionExport.SharedBank2__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                                <th  style="padding: 15px;">%Share -
                                                      <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank3__c.inlineHelpText}" />       

                                                    <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankCollectionExport.SharedBank3__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                               <th  style="padding: 15px;">%Share -
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionExport__c.Fields.SharedBank4__c.inlineHelpText}" />       

                                                   <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankCollectionExport.SharedBank4__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                      
                                            
                                            <apex:repeat value="{!CollectionExportMetholdLabel}" var="key" >
                                             <apex:repeat value="{!CollectionExportMap[key]}" var="cem" >
                                            <tr>
                                            <td class="text-left forceBackground">{!cem.Label__C}</td>
                                            
                                            <td class="text-right">
                                                <apex:inputfield value="{!cem.TermDays__c}" styleClass="form-control text-right fillin"
                                                    rendered="{!if(cem.Label__c=='B/C Term (D/A)' || cem.Label__c=='L/C Term','true',false)}"   style="width:70px;float:right;" />                                                
                                                </td>
                                            <td class="text-right">
                                                <apex:inputfield value="{!cem.Pattern__c }" styleClass="form-control text-right fillin"
                                                    />                                                
                                              
                                            </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!cem.Volumn__c}" rendered="{!cem.Volumn__c !=null && cem.Volumn__c !=0}" styleClass="form-control text-right fillin" 
                                                 
                                            
                                                /></td>
                                            <td class="text-right" style="width:100px;">
                                                <apex:inputfield value="{!cem.VolumnPercent__c}" styleClass="form-control text-right fillin"
                                                rendered="{!if(key!='2) Export collection' && key!='3) Advice L/C','true',false)}"   style="width:70px;float:right;" />     
                                                 <apex:outputfield value="{!cem.VolumnPercent__c}" styleClass="form-control text-right fillin"
                                                 rendered="{!if( (key=='2) Export collection' || key=='3) Advice L/C') && cem.VolumnPercent__c !=0 ,true,false)}"   style="width:70px;float:right;" />     
    
                                                </td>
                                            <td class="text-right">
                                                <apex:inputfield value="{!cem.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                rendered="{!if(key!='2) Export collection' && key!='3) Advice L/C','true',false)}"   style="width:70px;float:right;" />  
                                                  <apex:outputfield value="{!cem.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                  rendered="{!if( (key=='2) Export collection' || key=='3) Advice L/C') && cem.SharedTMB__c !=0 ,true,false)}"   style="width:70px;float:right;" />     
    
                            
                                                </td>
                                            <td  class="text-right">
                                                      <apex:inputfield value="{!cem.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                      rendered="{!if(key!='2) Export collection' && key!='3) Advice L/C','true',false)}"   style="width:70px;float:right;" />     
                            							<apex:outputfield value="{!cem.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if( (key=='2) Export collection' || key=='3) Advice L/C') && cem.SharedBank1__c !=0 ,true,false)}"    />     
    
                                                    </td>
                                                  <td  class="text-right"> <apex:inputfield value="{!cem.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                  rendered="{!if(key!='2) Export collection' && key!='3) Advice L/C','true',false)}"   style="width:70px;float:right;" />
                                                      <apex:outputfield value="{!cem.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                      rendered="{!if( (key=='2) Export collection' || key=='3) Advice L/C') && cem.SharedBank2__c !=0 ,true,false)}"   />     
    
                                                </td>
                                            <td  class="text-right"> <apex:inputfield value="{!cem.SharedBank3__c}" styleClass="form-control text-right fillin"
                                            rendered="{!if(key!='2) Export collection' && key!='3) Advice L/C','true',false)}"   style="width:70px;float:right;" /> 
                                                <apex:outputfield value="{!cem.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                rendered="{!if( (key=='2) Export collection' || key=='3) Advice L/C') && cem.SharedBank3__c !=0 ,true,false)}"    />     
    
                                                </td>
                                            <td  class="text-right"> <apex:inputfield value="{!cem.SharedBank4__c}" styleClass="form-control text-right fillin"
                                            rendered="{!if(key!='2) Export collection' && key!='3) Advice L/C','true',false)}"   style="width:70px;float:right;" />  
                                                <apex:outputfield value="{!cem.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                rendered="{!if( (key=='2) Export collection' || key=='3) Advice L/C') && cem.SharedBank4__c !=0 ,true,false)}"  />     
    
                                                </td>
                                            <td class="text-right {!if(cem.StandardFee__c !=null && cem.StandardFee__c != 0,'forceBackground','')}">
                                                <apex:outputfield value="{!cem.StandardFee__c}" />
                                                </td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            </tr>
                                                 </apex:repeat>
                                            
                                             </apex:repeat>
                                         <tr class="info endRow">
                                            <td class="text-left forceBackground">Total</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.TotalExportAvgPerMonth__c}" /></td>
                                            <td class="text-right"><apex:outputfield value="{!wallet.SumOfCollectionExportVolPercent__c}" /></td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right forceBackground">
                                                <apex:outputfield value="{!wallet.SumOfCollectionExportStandardFee__c}"   styleClass="form-control text-right fillin" />
                                                    </td>
                                            <td class="text-right">
                                                <apex:inputfield value="{!wallet.SumOfCollectionExportFeeCharge__c}" styleClass="form-control text-right fillin"  /> </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfCollectionExportWalletTradeFee__c}" /></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>  
                            
                            <!-- Start >> 17Aug2015 :by DA -->
                            <br /><br /> 
                            <div>
                                <table class="table table-striped table-hover" style="width:50%;" id="exportcollectiontable">                                   
                                    <thead>
                                        <tr >
                                            <th colspan="2">Export collection method</th>
                                            
                                                
                                            <th>Business Opportunity</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                       
                                                <apex:variable var="rowNum" value="{!1}" />
                                        <apex:variable var="exportstr" value="Export Collection Method" /> 
                                             <apex:repeat value="{!QuestionnaireMap[exportstr]}" var="qm" >                                                      
                                       <tr >
                                                <td style="width:120px;" >
                                              <apex:inputField value="{!qm.Answer__c}" 
                                              styleClass=" form-control fillin" style="height:30px;" onchange="showOpportunity(this,{!rowNum},'exportcollectiontable');" />
                                                </td>
                                                <td class="forceBackground text-left" >{!qm.Question__c}
                                                <br />
                                                {!qm.Question_TH__c}</td>
                                              <td style="width: 150px;"  id="Oppty{!rowNum}"
                                              class="text-left {!IF(qm.Answer__c == 'Yes','','display-none')}">
                                                  {!qm.Opportunity__c}
                                              </td>
                                            </tr>
                                              <apex:variable var="rowNum" value="{!rowNum + 1}" />
                                            </apex:repeat>
                                    </tbody>                                    
                                </table>
                            </div>                            
                            <!-- End >> 17Aug2015 :by DA -->
                            
                            <div>
                                <br />
                                 <div class="row" style="padding-bottom: 3px;"> 
                                        <div class="col-sm-12 col-md-6 col-lg-6" style="width:40%;">      
                                              <a href="#" class="btn  btn-success" data-toggle="collapse" aria-expanded="true" id="collectionUI">Add / Edit Collection Currency</a>   
                                              
                                              <apex:outputpanel id="CollectionCurrencypanel" >
                                              <div  style="float:right;margin-right:50px;display:{!if(isCollectCurrencyNull,'block','none')};"> 
                                            		<p class='bg-danger' style=' float: left;padding: 8px;border: 1px solid #E28888;margin-left:10px;margin-top: 20px;'>
                                                       If Sales Export is more than 0, there must be at least one record of Collection Currency
                                                    </p>
                                                    
                                                </div>
                                                       </apex:outputpanel>
                                                       
                                        </div>         
                                    </div> 
                                              <br />
                               <apex:outputpanel id="collectionblock">
                                <table class="table table-striped table-hover" id="collectiontable"
                                    style="width: 50%">
                                   <thead>
                                        <tr>
                                            <td class="text-left" style="border: none;"><label
                                                        class="control-label">Unit: THB</label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>Collection Currency
                                            	 <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CCY__c.inlineHelpText}" />
                             
                                            </th>
                                            <th>Portion (%)
                                                         <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CollectionPortion__c.inlineHelpText}" />
                                                         </th>
                                            <th>Amount per year (THB)
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CollectionAmtPerYear__c.inlineHelpText}" />
                                                     </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <apex:variable var="totalCollectionCCY" value="{!0}" />     
										<apex:variable var="totalCollectionAmt" value="{!0}" />
                                                   
                                        <apex:repeat value="{!CollectionList}" var="cl" >               
                                         <tr>
                                            <td>
												<apex:outputtext value="{!cl.CCY__r.ShortName__c}"/>
                                            </td>
                                            <td class="text-center">
                                            <apex:outputfield value="{!cl.CollectionPortion__c}" />
                                            </td>
                                            <td class="text-right">
                                            <apex:outputfield value="{!cl.CollectionAmtPerYear__c}" /> 
                                            </td>
                                        </tr>
                                        		<apex:variable var="totalCollectionCCY" value="{!totalCollectionCCY + cl.CollectionPortion__c}" />
                                                <apex:variable var="totalCollectionAmt" value="{!totalCollectionAmt + cl.CollectionAmtPerYear__c}" />
                                        </apex:repeat>        
                                            <tr class="info endRow">
                                                <td class="text-center">Total</td>
                                            	<td class="text-center"><apex:outputText value="{!totalCollectionCCY}"/>%</td>
                                            	<td class="text-right">
                                                    <apex:outputText value="{0, number, ###,##0}">
                                                    	<apex:param value="{!totalCollectionAmt}" />
                                                	</apex:outputText>
                                                </td>
                                        	</tr> 
                                   </tbody>            
                                      
                                </table>
                                   </apex:outputpanel>         
                            </div>
                            
                            <div>
                            <br />
                            <table class="table table-striped table-hover" style="width: 40%">
                                <thead>
                                  
                                      <apex:variable var="exportstr" value="Collection Questionnaire" />  
                                      <apex:variable var="internetbankingCollection" value="" /> 
                                             <apex:repeat value="{!QuestionnaireMap[exportstr]}" var="qm" >
                                                
                                                 <apex:variable var="internetbankingCollection" value="{!qm.Answer__c}" rendered="{!IF(qm.Answer__c == 'Yes' && qm.SEQ__c == 1,true,false)}"/>
 												 <tr style="display:{!IF(internetbankingCollection == 'Yes' || qm.SEQ__c == 1,'table-row','none')};" class="{!IF(qm.SEQ__c != 1,'internetbankingCollection','')}">
                                                		<td class="forceBackground text-left" style="width:120px;">
                                                            <apex:inputfield value="{!qm.Answer__c}" styleClass="form-control fillin"
                                                             style="width:120px;" onchange="internetbanking('{!qm.SEQ__c}',this,'Collection')"/>
                                                        </td>
                                                        <td class="forceBackground text-left" >
                                                            {!qm.Question__c}
                                                            <br />
                                                            {!qm.Question_TH__c}
                                                         </td>
                                                         
                                             	</tr>
                                             </apex:repeat>
                                        
                                  
                                </thead>
                            </table>
                                
                            </div>
                            
                        </fieldset>
                        
                        
                        
                        
                    </div>
                </div>
                <br />
                <header class="navbar navbar-default navbar-branded" role="banner">
                    <div class="panel-heading">
                        <div class="navbar-header ">
                            <a data-toggle="collapse" aria-expanded="true" href="#collapse2"
                                class="navbar-brand navbar-foundation-logo"> Payment Flow </a>
                        </div>
                    </div>
                </header>
               <div class="card collapse in panel-collapse" id="collapse2">
                    <div class="card-detail">
                        <!--  Section 1 -->
                        
                        <fieldset>
                            
                             <div>

                                <div class="col-sm-12 col-md-12 col-lg-5">
                                    <div class="form-group">

                                        <div>
                                        
                                            <table class="table table-striped">
                                                <tr>
                                                    <td class="text-left" style="border: none;"><label
                                                        class="control-label" wihth="50%">Unit: THB</label></td>
                                                    <td style="border: none;" width="25%">&nbsp;</td>
                                                    <td style="border: none;" wihth="25%">&nbsp;</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-left forceBackground" style="border: none;">
                                                        % COGS (From estimated sales)
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.COGSPercent__c.inlineHelpText}" />
                  
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                       
                                                       
                                                       <apex:inputfield value="{!wallet.COGSPercent__c}" onchange="checkIshasValue(this,'');" 
                                                       styleClass="form-control text-right {!if(wallet.COGSPercent__c == null || wallet.COGSPercent__c == 0,'danger','success')}"
                                                   />
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="text-left forceBackground" style="border: none;">
                                                        COGS (Amount: THB)
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.COGSAmount__c.inlineHelpText}" />
                  
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                        <apex:inputfield value="{!wallet.COGSAmount__c }" styleClass="form-control text-right"
                                                   />
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="text-left forceBackground" style="border: none;">
                                                        Operating Expense (Amount: THB)
                                                         <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.OperatingExpAmount__c.inlineHelpText}" />

                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                        <apex:inputfield value="{!wallet.OperatingExpAmount__c }" 
                                                        onchange="checkIshasValue(this,'OperatingExpAmount');" 
                                                        styleClass="form-control text-right {!if(wallet.OperatingExpAmount__c == null,'danger','success')}"
                                                   />
                                                        
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="text-left forceBackground" style="border: none;">
                                                        Total Payment (Amount: THB)        
                                                         <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPayment__c.inlineHelpText}" />

                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                         <apex:inputfield value="{!wallet.TotalPayment__c }" styleClass="form-control text-right "
                                                   />
                                                        
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                    Amount per year<br/>
                                                    (Unit: THB)
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="text-left forceBackground" style="border: none;">
                                                        Total Payment Domestic      
                                                        
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                        <apex:inputfield value="{!wallet.TotalPaymentDomesticPercent__c}" 
                                                        onchange="checkIshasValue(this,'TotalPaymentDomesticPercent');" 
                                                        style="width:87%;float:left;"
                                                        styleClass="{!if(wallet.TotalPaymentDomesticPercent__c == null,'danger','success')} form-control text-right " id="totaldomestic"
                                                   />
                                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                             style="float:left;margin-top:11px;margin-left:4px;"
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentDomesticPercent__c.inlineHelpText}" />
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                     <apex:inputfield value="{!wallet.TotalPaymentDomesticAmtPerYear__c}" styleClass="form-control text-right"
                                                   />
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentDomesticAmtPerYear__c.inlineHelpText}" />
                                                    </td>
                                                </tr>
                                                                                                                                                <tr>
                                                    <td class="text-left forceBackground" style="border: none;">
                                                        Total Payment Import        
                                                        
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                       
                                                    <apex:inputfield value="{!wallet.TotalPaymentImportPercent__c }" styleClass="form-control text-right "
                                                   />
                                                         <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentImportPercent__c.inlineHelpText}" />
                                                        
                                                    </td>
                                                    <td class="text-right" style="border: none;">
                                                      <apex:inputfield value="{!wallet.TotalPaymentImportAmtPerYear__c }" styleClass="form-control text-right "
                                                   />
                                                           <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.TotalPaymentImportAmtPerYear__c.inlineHelpText}" />
                                                    </td>
                                                </tr>
                                            </table>
                                                     
                                        </div>    
                                     </div>
                                </div>
                            </div>
                            <div>
                                <br/>
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <td class="text-left" style="border: none;"><label
                                                        class="control-label">Unit: THB</label>
                                            </td>
                                            <td colspan="5">
                                           		<p id="PaymentDomestic" class="bg-danger" style="display:{!if(isRequiredPaymentMethod,'block','none')}; float: left;padding: 8px;border: 1px solid #E28888;margin-left:10px;">
                                                 	If Payment Domestic is more than 0, there must be at least one product with %Vol. of more than 0

                                             	</p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th rowspan="2" style="vertical-align: middle;width:230px;">Payment Method<br />(Domestic)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.Label__c.inlineHelpText}" />

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">No. of transactions<br />(Average per Month)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.NoOfTransaction__c.inlineHelpText}" />

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Domestic (Vol.)<br />(Average per Month)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.Volume__c.inlineHelpText}" />

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">% Vol.
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.VolumePercent__c.inlineHelpText}" />

                                            </th>
                                            <th colspan="5" style="vertical-align: middle;">%TMB Share vs %Other Banks share</th>
                                            <th rowspan="2" style="vertical-align: middle;">Average<br />provident<br />fund (%)
                                               <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.AvgProvidentFund__c.inlineHelpText}" />

                                                                                                                              </th>
                                            <th rowspan="2" style="vertical-align: middle;">Standard Fee<br />(Reference)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.StandardFee__c.inlineHelpText}" />

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Fee charge <br />(adjusted by RM)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.FeeCharge__c.inlineHelpText}" />

                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Wallet Cash<br />fee (Yearly)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.WalletFee__c.inlineHelpText}" />

                                            </th>
                                        </tr>
                                        <tr>
                                            <th style="padding: 15px;">%Share-<br />TMB
                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedTMB__c.inlineHelpText}" />

                                            </th>
                                            <th style="padding: 15px;">%Share -
                                                <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank1__c.inlineHelpText}" />

                                                <br />
                                                	<apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankPaymentDomestic.SharedBank1__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>  
                                                <th  style="padding: 15px;">%Share -
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank2__c.inlineHelpText}" />

                                                    <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankPaymentDomestic.SharedBank2__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                                <th  style="padding: 15px;">%Share -
                                                     <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank3__c.inlineHelpText}" />

                                                    <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankPaymentDomestic.SharedBank3__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                               <th  style="padding: 15px;">%Share -
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentDomestic__c.Fields.SharedBank4__c.inlineHelpText}" />

                                                   <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankPaymentDomestic.SharedBank4__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                       
                                           <apex:repeat value="{!PaymentMetholdLabel}" var="key" >
                                                 <apex:repeat value="{!PaymentDomesticMap[key]}" var="pdm" >      
                                                <tr class="">
                                                    <td class="text-left forceBackground">{!pdm.Label__c}</td>
                                                    <td class="text-right">
                                                      <apex:inputfield value="{!pdm.NoOfTransaction__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c !='2) Cheque' && pdm.Label__c != '3) Fund Transfer' && pdm.Label__c != '1) Cash',true,false )}"   
                                                         />
                                                    
                                                    </td>
                                                    <td class="text-right">
                                                        <apex:outputfield value="{!pdm.Volume__c }" styleClass="form-control text-right"
                                                         rendered="{!if(pdm.Volume__c !=null,true,false)}"/>
                                                        
                                                        </td>
                                                    <td class="text-right">
                                                        <apex:inputfield value="{!pdm.VolumePercent__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                        rendered="{!if(pdm.Label__c !='2) Cheque' && pdm.Label__c != '3.1 Bahtnet' && pdm.Label__c != '3.2 SMART credit' && pdm.Label__c != '3.3 Direct credit' ,true,false )}"   
                                                        />
                                                             <apex:outputfield value="{!pdm.VolumePercent__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                         rendered="{!
                                                         if(pdm.VolumePercent__c !=0 && 
                                                            (pdm.Label__c =='2) Cheque') ,true,false )}"   
                                                       />            
                                                       </td>
                                                    <td class="text-right">
                                                        <apex:inputfield value="{!pdm.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                       rendered="{!if(pdm.Label__c !='2) Cheque' && pdm.Label__c != '3) Fund Transfer',true,false )}"   
                                                        />
                                                             <apex:outputfield value="{!pdm.SharedTMB__c}" styleClass="form-control text-right fillin"
                                                         rendered="{!
                                                         if(pdm.SharedTMB__c !=0 && 
                                                            (pdm.Label__c =='2) Cheque' || pdm.Label__c == '3) Fund Transfer') ,true,false )}"   
                                                       />      
                                                        </td>
                                                    <td class="text-right">
                                                        <apex:inputfield value="{!pdm.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c !='2) Cheque' && pdm.Label__c != '3) Fund Transfer' ,true,false )}"   
                                                        />
                                                             <apex:outputfield value="{!pdm.SharedBank1__c}" styleClass="form-control text-right fillin"
                                                       rendered="{!
                                                         if(pdm.SharedBank1__c !=0 && 
                                                            (pdm.Label__c =='2) Cheque' || pdm.Label__c == '3) Fund Transfer') ,true,false )}"   
                                                       />   
                                                        </td>
                                                    <td class="text-right">
                                                        <apex:inputfield value="{!pdm.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c !='2) Cheque' && pdm.Label__c != '3) Fund Transfer' ,true,false )}"   
                                                        />
                                                             <apex:outputfield value="{!pdm.SharedBank2__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!
                                                         if(pdm.SharedBank2__c !=0 && 
                                                            (pdm.Label__c =='2) Cheque' || pdm.Label__c == '3) Fund Transfer') ,true,false )}"   
                                                       />        
                                                        </td>
                                                   <td class="text-right">
                                                        <apex:inputfield value="{!pdm.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c !='2) Cheque' && pdm.Label__c != '3) Fund Transfer' ,true,false )}"   
                                                        />
                                                             <apex:outputfield value="{!pdm.SharedBank3__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!
                                                         if(pdm.SharedBank3__c !=0 && 
                                                            (pdm.Label__c =='2) Cheque' || pdm.Label__c == '3) Fund Transfer') ,true,false )}"   
                                                       />                                                        </td>
                                                    <td class="text-right">
                                                         <apex:inputfield value="{!pdm.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c !='2) Cheque' && pdm.Label__c != '3) Fund Transfer' ,true,false )}"   
                                                        />
                                                             <apex:outputfield value="{!pdm.SharedBank4__c}" styleClass="form-control text-right fillin"
                                                       rendered="{!
                                                         if(pdm.SharedBank4__c !=0 && 
                                                            (pdm.Label__c =='2) Cheque' || pdm.Label__c == '3) Fund Transfer') ,true,false )}"   
                                                       />  
                                                        </td>
                                                    <td class="text-right">
                                                        <apex:inputfield value="{!pdm.AvgProvidentFund__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c =='4) Payroll',true,false )}" 
                                                        />
                                                        </td>
                                                   <td class="text-right {!if(pdm.StandardFee__c !=null && pdm.StandardFee__c != 0,'forceBackground','')}">
                                                        <apex:outputfield value="{!pdm.StandardFee__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c =='4) Payroll' || pdm.Label__c =='5) Fleet card' ,true,false )}"   
                                                        /> <div style="display:{!if(pdm.StandardFee__c !=null,'inline','none')};">%</div>
                                                            
                                                        </td>
                                                    <td class="text-right">
                                                         <apex:inputfield value="{!pdm.FeeCharge__c}" styleClass="form-control text-right fillin"
                                                        rendered="{!if(pdm.Label__c =='4) Payroll' || pdm.Label__c =='5) Fleet card' ,true,false )}"   
                                                        />
                                                        </td>
                                                    <td class="text-right">
                                                        <apex:outputfield value="{!pdm.WalletFee__c}" styleClass="form-control text-right fillin"
                                                         rendered="{!if(pdm.Label__c =='4) Payroll' || pdm.Label__c =='5) Fleet card' ,true,false )}"   
                                                        />
                                                        </td>
                                                </tr>
                                                  </apex:repeat>
                                              </apex:repeat> 
                                              <tr class="info endRow">
                                            <td class="forceBackground">Total</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentDomesticAvgPerMonth__c}"  styleClass="form-control text-right" />
                                                </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentDomesticVolPercent__c}"  styleClass="form-control text-right" />%
                                                </td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">&nbsp;</td>
                                            <td class="text-right"></td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentDomesticWalletCashFee__c}"  styleClass="form-control text-right fillin" />
                                                </td>
                                        </tr>      
                                                    
                                                
                                    </tbody>
                                </table>
                            </div>                                                    
                            
                            <!-- Start >> 17Aug2015 :by DA -->
                            <br /><br /> 
                            <div>
                                <table class="table table-striped table-hover" style="width:50%;" id="domesticpaymenttable">                                   
                                    <thead>
                                        <tr >
                                            <th colspan="2">Domestic payment method</th>
                                                                                           
                                            <th style="width:150px;">Business Opportunity</th>
                                        </tr>
                                       <apex:variable var="rowNum" value="{!1}" />     
                                       <apex:repeat value="{!DomesticPaymentSegment}" var="key" >
                                             
                                             <tr >
                                            <th class="text-left">{!key}</th>
                                            <th></th>                                               
                                            <th></th>
                                        </tr>
                                        <apex:repeat value="{!QuestionnaireMap[key]}" var="qm" >
                                                 <tr  id="tr{!rowNum}">
                                                
                                                <td class="forceBackground text-left" >{!qm.Question__c}
                                                <br />
                                                {!qm.Question_TH__c}
                                                </td>
                                                <td style="width:200px;" >
                                              <apex:inputField value="{!qm.Answer__c}" rendered="{!if(qm.Answer_Type__c =='Yes or No','true','false')}" 
                                              styleClass=" form-control fillin Answer{!rowNum}" style="height:30px;"  
                                              onchange="showOpportunity(this,{!rowNum},'domesticpaymenttable');"  />
                                                  
                                                  <apex:inputField value="{!qm.OptionText__c}" rendered="{!if(qm.Answer_Type__c =='Text','true','false')}" 
                                              styleClass=" form-control fillin Answer{!rowNum}" style="height:30px;"  
                                              onchange="showOpportunity(this,{!rowNum},'domesticpaymenttable');" />
                                                  <apex:inputField value="{!qm.OptionNumber__c}" rendered="{!if(qm.Answer_Type__c =='Number','true','false')}" 
                                              styleClass=" form-control fillin Answer{!rowNum}" style="height:30px;"  
                                              onchange="showOpportunity(this,{!rowNum},'domesticpaymenttable');" />
                                                  <apex:inputField value="{!qm.OptionPercent__c}" rendered="{!if(qm.Answer_Type__c =='Percent','true','false')}" 
                                              styleClass=" form-control fillin Answer{!rowNum}" style="height:30px;"  
                                              onchange="showOpportunity(this,{!rowNum},'domesticpaymenttable');" />
                                                  <apex:inputField value="{!qm.OptionBank__c}" rendered="{!if(qm.Answer_Type__c =='Bank','true','false')}" 
                                              styleClass=" fillin Answer{!rowNum}"  />
                                                </td>
                                              <td style="width: 150px;"  id="Oppty{!rowNum}"
                                              class="text-left {!IF(qm.Answer__c == 'Yes','','display-none')}">
                                                  
                                                  {!qm.Opportunity__c}
                                              </td>
                                            </tr>
                                          <apex:variable var="rowNum" value="{!rowNum + 1}" />        
                                                     </apex:repeat>
                                                 </apex:repeat> 
                                            
                                    </thead>                                    
                                </table>
                            </div>                            
                            <!-- End >> 17Aug2015 :by DA -->
                            
                            <div>
                                <br />
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <td class="text-left" style="border: none;"><label
                                                        class="control-label">Unit: THB</label>
                                            </td>
                                            <td colspan="5">
                                           		<p id="PaymentImport" class="bg-danger" style="display:{!if(isRequiredPaymentImport,'block','none')}; float: left;padding: 8px;border: 1px solid #E28888;margin-left:10px;">
                                                 	If Payment Import is more than 0, there must be at least one product with %Vol. of more than 0

                                             	</p>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th rowspan="2" style="vertical-align: middle;">Payment Method<br /> (Import)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Label__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="3" style="vertical-align: middle;">Term<br />(Days)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Term__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="3" style="vertical-align: middle;">Payment pattern
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Pattern__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">No. of<br />transactions<br /> Average<br />per Month
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.NoOfTransaction__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">Import
                                                (Vol.)<br /> Average<br />per Month
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Volume__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="2" style="vertical-align: middle;">% Vol.
                                            <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.VolumePercent__c.inlineHelpText}" />
                               
                                            </th>
                                            <th colspan="5">%TMB Share vs %Other Banks share</th>
                                            <th rowspan="2" style="vertical-align: middle;">Type of Fee
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.Type_of_Fee__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="2" style="vertical-align:middle;">Standard Fee<br />(Reference)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.StandardFee__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="2" style="vertical-align:middle;">Fee charge<br/>(adjusted by RM)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.FeeCharge__c.inlineHelpText}" />
                               
                                            </th>
                                            <th rowspan="2" style="vertical-align:middle;">Wallet TF Fee<br />(Yearly)
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.WalletTFFee__c.inlineHelpText}" />
                               
                                            </th>
                                        </tr>
                                        <tr>
                                            <th style="padding: 15px;">%Share-<br /> TMB
                                             <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedTMB__c.inlineHelpText}" />
                                            </th>
                                            <th style="padding: 15px;">%Share -
                                                 <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank1__c.inlineHelpText}" />
                                                <br />
                                                	<apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankPaymentImport.SharedBank1__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>  
                                                <th  style="padding: 15px;">%Share -
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank2__c.inlineHelpText}" />
                                                    <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1" 
                                                        value="{!otherBankPaymentImport.SharedBank2__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                                <th  style="padding: 15px;">%Share -
                                                    <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank3__c.inlineHelpText}" />
                                                    <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankPaymentImport.SharedBank3__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                               <th  style="padding: 15px;">%Share -
                                                   <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanPaymentImport__c.Fields.SharedBank4__c.inlineHelpText}" />
                                                   <br />
                                                    <apex:selectlist styleclass="form-control fillin-input90" size="1"
                                                        value="{!otherBankPaymentImport.SharedBank4__c}" multiselect="false">
                                                    	<apex:selectOptions value="{!shareBanks}" />
                                                	</apex:selectlist>
                                                </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                     		
                                           <apex:repeat value="{!PaymentImportMetholdLabel}" var="key" >
                                               
                                                 <apex:repeat value="{!PaymentImportMap[key]}" var="pim" >  
                                            
                                                     <tr>
                                                     <td class="text-left {!if(pim.Label__c =='L/C Term 2','','forceBackground')}">
                                                         
                                                         <div style="display:{!if(pim.Label__c =='L/C Term 2','none','block')}">{!key} </div> </td>
                                                        <td class="text-center">
                                                            <apex:inputfield value="{!pim.Term__c}" styleClass="form-control text-right fillin" style="width:70px;"
                                                         rendered="{!if(pim.Label__c =='B/C Term (D/A)' || pim.Label__c =='L/C Term' ,true,false )}"   
                                                        />
                                                            </td>
                                                        <td class="text-left">
                                                            <apex:inputfield value="{!pim.Pattern__c}" styleClass="form-control text-right fillin"
                                                            rendered="{!if(pim.Label__c =='L/C Term 2',false,true)}"
                                                            style="min-width: 120px;"/>
                                                            </td>
                                                        <td class="text-center">
                                                            <apex:inputfield value="{!pim.NoOfTransaction__c}" styleClass="form-control text-right fillin" style="width:70px;"
                                                            rendered="{!if(pim.Label__c !='2) Bill' && pim.Label__c !='3) Import L/C' && pim.Label__c !='L/C Term 2' ,true,false )}" 
                                                            />
                                                            <apex:outputfield value="{!pim.NoOfTransaction__c}" styleClass="form-control text-right fillin" style="width:70px;"
                                                            rendered="{!if(pim.NoOfTransaction__c !=null &&(pim.Label__c =='2) Bill' || pim.Label__c =='3) Import L/C') ,true,false )}" 
                                                            />    
                                                            </td>
                                                            <td class="text-center">
                                                            <apex:outputfield value="{!pim.Volume__c}" styleClass="form-control text-right fillin" 
                                                            rendered="{!if(pim.Label__c =='L/C Term 2',false,true)}"
                                                            />
                                                            </td>
                                                            
                                                            <td class="text-center">
                                                            <apex:inputfield value="{!pim.VolumePercent__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(pim.Label__c !='2) Bill' && pim.Label__c !='3) Import L/C' && pim.Label__c !='L/C Term 2' ,true,false )}" 
                                                            />
                                                             <apex:outputfield value="{!pim.VolumePercent__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!
                                                            if(pim.VolumePercent__c !=0 && (pim.Label__c =='2) Bill' || pim.Label__c =='3) Import L/C' && pim.Label__c !='L/C Term 2') ,true,false )}" 
                                                            />   
                                                                
                                                            </td>
                                                            
                                                        <td class="text-center">
 															<apex:inputfield value="{!pim.SharedTMB__C}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(pim.Label__c !='2) Bill' && pim.Label__c !='3) Import L/C' && pim.Label__c !='L/C Term 2' ,true,false )}" 
                                                            />
                                                             <apex:outputfield value="{!pim.SharedTMB__C}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(pim.SharedTMB__C !=0&& (pim.Label__c =='2) Bill' || pim.Label__c =='3) Import L/C' && pim.Label__c !='L/C Term 2') ,true,false )}" 
                                                            />   
                                                            
                                                            </td>
                                                        <td class="text-center">
                                                            <apex:inputfield value="{!pim.SharedBank1__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(pim.Label__c !='2) Bill' && pim.Label__c !='3) Import L/C' && pim.Label__c !='L/C Term 2' ,true,false )}" 
                                                            />
                                                             <apex:outputfield value="{!pim.SharedBank1__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if( pim.SharedBank1__c !=0&& (pim.Label__c =='2) Bill' || pim.Label__c =='3) Import L/C' && pim.Label__c !='L/C Term 2') ,true,false )}" 
                                                            /> 
                                                            
                                                            </td>
                                                        <td class="text-center">
                                                             <apex:inputfield value="{!pim.SharedBank2__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(pim.Label__c !='2) Bill' && pim.Label__c !='3) Import L/C' && pim.Label__c !='L/C Term 2' ,true,false )}" 
                                                            />
                                                             <apex:outputfield value="{!pim.SharedBank2__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(  pim.SharedBank2__c !=0&& (pim.Label__c =='2) Bill' || pim.Label__c =='3) Import L/C' && pim.Label__c !='L/C Term 2') ,true,false )}" 
                                                            /> 
                                                            
                                                            </td>
                                                        <td class="text-center">
                                                            <apex:inputfield value="{!pim.SharedBank3__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(pim.Label__c !='2) Bill' && pim.Label__c !='3) Import L/C' && pim.Label__c !='L/C Term 2' ,true,false )}" 
                                                            />
                                                             <apex:outputfield value="{!pim.SharedBank3__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if( pim.SharedBank3__c !=0&& (pim.Label__c =='2) Bill' || pim.Label__c =='3) Import L/C' && pim.Label__c !='L/C Term 2') ,true,false )}" 
                                                            /> 
                                                                 </td>
                                                        <td class="text-center">
                                                            <apex:inputfield value="{!pim.SharedBank4__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if(pim.Label__c !='2) Bill' && pim.Label__c !='3) Import L/C' && pim.Label__c !='L/C Term 2' ,true,false )}" 
                                                            />
                                                             <apex:outputfield value="{!pim.SharedBank4__c}" styleClass="form-control text-right fillin" style="width: 75px;"
                                                            rendered="{!if( pim.SharedBank4__c !=0&& (pim.Label__c =='2) Bill' || pim.Label__c =='3) Import L/C' && pim.Label__c !='L/C Term 2') ,true,false )}" 
                                                            /> 
                                                                 </td>
                                                       <td class="text-right">
                                                           <apex:outputfield value="{!pim.Type_of_Fee__c}" styleClass="form-control text-right fillin" />
                                                                 </td>
                                                        <td class="text-right {!if(pim.StandardFee__c !=null && pim.StandardFee__c != 0,'forceBackground','')}">
                                                     
                                                           <apex:outputfield value="{!pim.StandardFee__c}" styleClass="form-control text-right fillin"
                                                           rendered="{!if(pim.Type_of_Fee__c != null,'true','false')}"
                                                           /> <div style="display:{!if(pim.StandardFee__c !=null,'inline','none')};">%</div>
                                                                 </td>
                                                        <td class="text-right">
                                                           <apex:inputfield value="{!pim.FeeCharge__c}" styleClass="form-control text-right fillin"
                                                           rendered="{!if(pim.Type_of_Fee__c != null,'true','false')}"
                                                           />
                                                                 </td>
                                                        <td class="text-right">
                                                           <apex:outputfield value="{!pim.WalletTFFee__c}" styleClass="form-control text-right fillin"
                                                           rendered="{!if(pim.Type_of_Fee__c != null,'true','false')}"
                                                           />
                                                                 </td>
                                                    </tr>
                                                     </apex:repeat>
                                                  </apex:repeat>
                                                                           
                                        <tr class="info endRow">
                                            <td class=" forceBackground">Total</td>                                            
                                            <td>&nbsp;</td>
                                            <td class="text-left"></td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportNoOfTransaction__c}" styleClass="form-control text-right fillin" />
                                            </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportImportVol__c}" styleClass="form-control text-right fillin" />
                                            </td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportVolPercent__c} " styleClass="form-control text-right fillin" />%
                                            
                                            </td>
                                            <td class="text-right">&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>                                            
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td>&nbsp;</td>
                                            <td class="text-right">
                                                <apex:outputfield value="{!wallet.SumOfPaymentImportWalletTFFee__c}" styleClass="form-control text-right fillin" />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        
                            <div>
                                <br />
                                <table class="table table-striped table-hover" style="width: 50%">
                                    <thead>
                                    <apex:variable var="paymentimport" value="Payment Method Import" /> 
                                    <apex:variable var="internetbankingPayment" value="" /> 
                                     <apex:repeat value="{!QuestionnaireMap[paymentimport]}" var="qnm" >
                                         
                                        <apex:variable var="internetbankingPayment" value="{!qnm.Answer__c}" rendered="{!IF(qnm.Answer__c == 'Yes' && qnm.SEQ__c == 1,true,false)}"/>
         
                                       	<tr style="display:{!IF(internetbankingPayment == 'Yes' || qnm.SEQ__c == 1,'table-row','none')};" class="{!IF(qnm.SEQ__c != 1,'internetbankingPayment','')}">
                                            <td class="forceBackground text-left" style="width:120px;">
                                                <apex:inputfield value="{!qnm.Answer__c}" styleClass="form-control fillin"
                                                style="width:120px;" onchange="internetbanking('{!qnm.SEQ__c}',this,'Payment')"/>
                                                    </td>
                                                <td class="forceBackground text-left" >
                                                    {!qnm.Question__c}
                                                <br />
                                                    {!qnm.Question_TH__c}
                                                </td>
                                        </tr>
                                                 
                                        </apex:repeat>
                                    </thead>
                                </table>
                                
                            </div>
                        
                           <div>
                                <br />
                                               <div class="row" style="padding-bottom: 3px;"> 
                                        <div class="col-sm-12 col-md-6 col-lg-6" style="width:40%;">      
                                              <a href="#" class="btn  btn-success" data-toggle="collapse" aria-expanded="true" id="paymentUI">Add / Edit Payment Currency</a>  
                                              <apex:outputpanel id="PaymentCurrencypanel" >
                                              <div  style="float:right;margin-right:50px;display:{!if(isPaymentCurrencyNull,'block','none')};"> 
                                            		<p class='bg-danger' style=' float: left;padding: 8px;border: 1px solid #E28888;margin-left:10px;margin-top: 20px;'>
                                                       If Payment Import is more than 0, there must be at least one record of Payment Currency
                                                    </p>
                                                    
                                                </div>
                                              </apex:outputpanel>
                                        </div>                                       
                                    </div> 
                                              <br />
                                              <apex:outputpanel id="paymentblock">
                                <table class="table table-striped table-hover"
                                    style="width: 50%">
                                    <thead>
                                        
                                        <tr>
                                            <th>Payment Currency
                                              <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                      title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.CCY__c.inlineHelpText}"  />
            
                                            </th>
                                            <th>Portion (%)
                                                           <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.PaymentPortion__c.inlineHelpText}"  />
            
                                                         </th>
                                            <th class="text-right">Amount per year (THB)
                                                       <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanCollectionOrPaymentCurrency__c.Fields.PaymentAmtPerYear__c.inlineHelpText}"  />
            
                                                     </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <apex:variable var="totalPaymentCCY" value="{!0}" />     
										<apex:variable var="totalPaymentAmt" value="{!0}" />
                                          
										<apex:repeat value="{!PaymentList}" var="pl" >               
                                         <tr>
                                            <td>
                                            	<apex:outputtext value="{!pl.CCY__r.ShortName__c}" />
                                            </td>
                                            <td class="text-center">
                                            <apex:outputfield value="{!pl.PaymentPortion__c}" />
                                            </td>
                                            <td class="text-right">
                                            <apex:outputfield value="{!pl.PaymentAmtPerYear__c}" /> 
                                            </td>
                                        </tr>
                               					<apex:variable var="totalPaymentCCY" value="{!totalPaymentCCY + pl.PaymentPortion__c}" />
                                                <apex:variable var="totalPaymentAmt" value="{!totalPaymentAmt + pl.PaymentAmtPerYear__c}" />
                                            </apex:repeat>        
                                            <tr class="info endRow">
                                                <td class="text-center">Total</td>
                                            	<td class="text-center"><apex:outputText value="{!totalPaymentCCY}"/>%</td>
                                            	<td class="text-right">
                                                    <apex:outputText value="{0, number, ###,##0}">
                                                    	<apex:param value="{!totalPaymentAmt}" />
                                                	</apex:outputText>
                                                </td>
                                        	</tr>                                        
                                    </tbody>
                                </table>
                                            </apex:outputpanel>
                            </div>
                               
                            <!-- Start >> 17Aug2015 :by DA -->
                            <div>
                                <br />
                                <div class="row">
                                <div class="col-lg-8 col-md-12 col-sm-12">
                                    <table class="table table-striped table-hover" id="liquidityTable">
                                        <thead>
                                            <tr>
                                                <th colspan="2">Liquidity Management</th>                                                
                                                <th style="width:150px;">Business Opportunity</th>
                                            </tr>
                                      </thead>
                                      <tbody>
                                            <apex:variable var="rowNum" value="{!1}" />   
                                            <apex:variable var="paymentimport" value="Liquidity Management" /> 
                                     <apex:repeat value="{!QuestionnaireMap[paymentimport]}" var="qm" >
                                                <tr >
                                                <td style="width:120px;" >
                                              <apex:inputField value="{!qm.Answer__c}" 
                                              styleClass=" form-control fillin" style="height:30px;" onchange="showOpportunity(this,{!rowNum},'liquidityTable');" />
                                                </td>
                                                <td class="forceBackground text-left" >{!qm.Question__c}
                                                <br />
                                                {!qm.Question_TH__c}
                                                </td>
                                              <td style="width: 150px;"  id="Oppty{!rowNum}"
                                              class="text-left {!IF(qm.Answer__c == 'Yes','','display-none')}">
                                                  {!qm.Opportunity__c}
                                              </td>
                                            </tr>
                                            <apex:variable var="rowNum" value="{!rowNum + 1}" />      
                                        </apex:repeat>
                                            
                                         
                                        
                                      </tbody>
                                  </table>
                                </div>
                                </div>
                            </div>
                            <!-- End >> 17Aug2015 :by DA -->
                            
                            <div>
                                <br />
                                <div class="col-lg-3 col-md-12 col-sm-12">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>
                                                <th>Total Wallet Cash fee (yearly)
                                                 <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.SumOfWalletCashFee__c.inlineHelpText}" />
                                        
                                                </th>
                                                <td style="text-align:right"> <apex:outputfield value="{!wallet.SumOfWalletCashFee__c }" /></td>
                                            </tr>
                                            <tr>
                                                <th>Total Wallet TF fee (yearly)
                                                 <span class="glyphicon glyphicon-question-sign" id="bootstrap-tooltip" 
                                                     data-toggle="tooltip"
                                                     data-delay='{"show":"0", "hide":"100"}'
                                                     data-animation="false"
                                                     data-placement="bottom" 
                                                     title="{!$ObjectType.AcctPlanWallet__c.Fields.SumOfWalletTFFee__c.inlineHelpText}" />
                                        
                                                </th>
                                                <td style="text-align:right"><apex:outputfield value="{!wallet.SumOfWalletTFFee__c }" /></td>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                                
                            </div>
                        
                        
                        
                        
                        
                        </fieldset>
                </div> 
                </div>
              </apex:pageBlock>                              
            </apex:form>
        </div>
			<div class="bootstrap-sf1">                                  
          <!-- Modal -->
                <div  class="modal fade modal-fullscreen force-fullscreen"  id="frmModel" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="margin-bottom: 30px;margin-top: 45px;">
                  <div class="modal-dialog" style="width:100%;height:95%;" >
                    <div class="modal-content" style="width:100%;height:95%;" >
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel"> </h4>
                      </div>
                      <div class="modal-body">
                          <iframe id="modalIframe" src="#" width="100%" height="400px" frameborder="0" allowtransparency="true"></iframe>  
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>                       
                      </div>
                    </div>
                    <!-- /.modal-content -->
                  </div>  <!-- /.modal-dialog -->
                </div>
              </div>    

                    
                    

        <apex:includescript value="{!$Resource.AccountPlan_JqueryScript}" />
        <apex:includescript value="{!$Resource.AccountPlan_Bootstrap}" />        
        <apex:includeScript value="/support/console/22.0/integration.js"/>
        <apex:includeScript value="{!$Resource.AccountPlan_Mustache}"/>
            
          <script type="text/javascript">
               // Prevent Config
               var $j = jQuery.noConflict();
				 			 var dependsquestiontr10 = "#domesticpaymenttable .tr10";
                             var dependsquestiontr11 = "#domesticpaymenttable .tr11";
							 var dependsquestiontr12 = "#domesticpaymenttable .tr12";
                             var dependsquestiontr13 = "#domesticpaymenttable .tr13";                                
                             var dependsquestion9 = "#domesticpaymenttable .Answer9";   
				
				function showOpportunity(answer,data,table){ 
                var ids = "#"+table+" #Oppty"+data;
                 if(table !='domesticpaymenttable'){   
                      if(answer.value == 'Yes'){
                         $j(ids).show();   
                      }else{
                          $j(ids).hide();  
                      }
                 }else{
                     	if(data == 4 || data==3){
                            var dependsquestion1 = "#domesticpaymenttable .Answer3";
                            var dependsquestion2 = "#domesticpaymenttable .Answer4";
                            var dependsOpp = "#domesticpaymenttable #Oppty4";
                            if($j(dependsquestion1).val()=='Yes' && $j(dependsquestion2).val()=='Yes'){
                                if($j.trim($j(dependsOpp).text())=='' || $j.trim($j(dependsOpp).text())==null){
                                    $j(dependsOpp).text('Cheque issuing');
                                    $j(dependsOpp).show();
                                    }else{
                                    	$j(dependsOpp).show();
                                    }
                            }else{
                                $j(dependsOpp).hide();   
                            }
                            }else if(data == 7 || data== 8){
                             var dependsquestion3 = "#domesticpaymenttable .Answer7";
                            var dependsquestion4 = "#domesticpaymenttable .Answer8";
                            	var dependsOpp2 = "#domesticpaymenttable #Oppty8";
                               
                                
                            if($j(dependsquestion3).val()!=null &&$j(dependsquestion3).val()!='' && $j(dependsquestion4).val()=='Yes'){
                                 if($j(dependsOpp2).text().trim()=='' || $j(dependsOpp2).text().trim()==null){
                                    $j(dependsOpp2).html('Payroll package, Provident fund');
                                     $j(dependsOpp2).show();
                                    }else{
                                        
                                    	$j(dependsOpp2).show();
                                    }
                            }else{
                                $j(dependsOpp2).hide();   
                            }
                            
                            
                            }else if(data == 9 || data== 10 || data== 11 || data== 12 || data== 13 ){
                                   
                                
                                 var dependsquestiontr10 = "#domesticpaymenttable #tr10";
                             var dependsquestiontr11 = "#domesticpaymenttable #tr11";
							 var dependsquestiontr12 = "#domesticpaymenttable #tr12";
                             var dependsquestiontr13 = "#domesticpaymenttable #tr13";                                
                             var dependsquestion9 = "#domesticpaymenttable .Answer9";
                              var dependsquestion11 = "#domesticpaymenttable .Answer11";  
                            if($j(dependsquestion9).val()=='Yes'){
                                $j(dependsquestiontr10).show();
                                 $j(dependsquestiontr11).show();
                                $j(dependsquestiontr12).hide();
                                $j(dependsquestiontr12).val ('');
                                 $j(dependsquestiontr13).hide();
                                 $j(dependsquestiontr13).val ('');
                            }else if($j(dependsquestion9).val()=='No'){
                                
                                 $j(dependsquestiontr10).hide();
                                 $j(dependsquestiontr11).hide();
                                $j(dependsquestiontr10).val ('');
                                 $j(dependsquestiontr11).val ('');
                                
                                $j(dependsquestiontr12).show();
                                 $j(dependsquestiontr13).show();
                            }else{
                                
                                 $j(dependsquestiontr10).val ('');
                                 $j(dependsquestiontr11).val ('');
                                $j(dependsquestiontr12).val ('');
                                 $j(dependsquestiontr13).val ('');
                                
                                 $j(dependsquestiontr10).hide();
                                 $j(dependsquestiontr11).hide();
                                 $j(dependsquestiontr12).hide();
                                 $j(dependsquestiontr13).hide();
                            }
                             
                                
                                 var dependsquestion11 = "#domesticpaymenttable .Answer11";  
                                 var dependsOpp11 = "#domesticpaymenttable #Oppty11";
                            

                                if($j(dependsquestion9).val()=='Yes' && $j(dependsquestion11).val()!=null && $j(dependsquestion11).val()!=''){
                                    if($j(dependsOpp11).text().trim()=='' || $j(dependsOpp11).text().trim()==null){
                                    $j(dependsOpp11).text('Fleet Card');
                                    $j(dependsOpp11).show();
                                    }else{
                                    	$j(dependsOpp11).show();
                                    }
                                  }else{
                                      $j(dependsOpp11).hide();
                                      }

									var dependsquestion12 = "#domesticpaymenttable .Answer12";  
									var dependsquestion13 = "#domesticpaymenttable .Answer13";  
									var dependsOpp12 = "#domesticpaymenttable #Oppty12";
									var dependsOpp13 = "#domesticpaymenttable #Oppty13";	                                
                                 if($j(dependsquestion9).val()=='No' && $j(dependsquestion12).val()=='Yes' && $j(dependsquestion13).val()=='Yes'){
                                     
                                    if($j(dependsOpp13).text().trim()=='' || $j(dependsOpp13).text().trim()==null){
                                        	$j(dependsOpp13).text('Fleet card');
                                       
                                            $j(dependsOpp13).show();
                                        	
                                    }else{
                                    	$j(dependsOpp12).show();
                                        $j(dependsOpp13).show();
                                    }
                                  }else{
                                      $j(dependsOpp12).hide(); 
                                      $j(dependsOpp13).hide();
                                      }
                                  
                                
                                }else{
                                
                                 if(answer.value == 'Yes'){
                                     $j(ids).show();   
                                  }else{
                                      $j(ids).hide();  
                                  }
                            }
                     }
                 
                }
				function clearIframe(){
                    $j("#modalIframe").attr('src','');
                }

                // Ready Event  
                $j(document).ready( function () { 
                     $j('[data-toggle="tooltip"]').tooltip(); 
                    clearIframe();
                    		 var dependsquestiontr10 = "#domesticpaymenttable #tr10";
                             var dependsquestiontr11 = "#domesticpaymenttable #tr11";
							 var dependsquestiontr12 = "#domesticpaymenttable #tr12";
                             var dependsquestiontr13 = "#domesticpaymenttable #tr13";                                
                             var dependsquestion9 = "#domesticpaymenttable .Answer9";
                     		 var dependsOpp11 = "#domesticpaymenttable #Oppty11";
                    		var dependsOpp12 = "#domesticpaymenttable #Oppty12";
                    		var dependsOpp13 = "#domesticpaymenttable #Oppty13";
                    if($j(dependsquestion9).val()=='Yes'){
                        $j(dependsquestiontr12).addClass("display-none");
                         $j(dependsquestiontr13).addClass("display-none");
                        $j(dependsOpp11).removeClass("display-none");
                        
                    }else if($j(dependsquestion9).val()=='No'){
                        $j(dependsOpp12).removeClass("display-none");
                         $j(dependsOpp13).removeClass("display-none");
                        
                         $j(dependsquestiontr10).addClass("display-none");
                         $j(dependsquestiontr11).addClass("display-none");
                    }else{
                         $j(dependsquestiontr10).addClass("display-none");
                         $j(dependsquestiontr11).addClass("display-none");
                         $j(dependsquestiontr12).addClass("display-none");
                         $j(dependsquestiontr13).addClass("display-none");
                    }
                    		
                     
                    $j('[id$=selectlgutilitiesopt]').change(function() {
               
                if($j('[id$=selectlgutilitiesopt]').val() =='Yes'){
                    
                    $j('.labellgutilitiesopt').show();
                   
                }else{
                    $j('.labellgutilitiesopt').hide();
                }
                        
                		             
            });
                    
                    
                     $j("#collectionUI").on('click',function(event){
                        
                        event.preventDefault();
                        $j('#modalIframe').attr("src",'/apex/CurrencyEdittable?walletID={!wallet.id}&type=Collection');                 
                        
                        $j('#frmModel').modal({show:true});
                    }); 
                    
                    $j("#paymentUI").on('click',function(event){
                        
                        event.preventDefault();
                        $j('#modalIframe').attr("src",'/apex/CurrencyEdittable?walletID={!wallet.id}&type=Payment');                 
                        
                        $j('#frmModel').modal({show:true});
                    }); 
                    
                    //Close modal
                    
                    $j('#frmModel').on('hidden.bs.modal', function (e) {
                          // do something...
                        		clearIframe();
                               rerendercurrency();                
                    });
                    
                    });
				function checkIshasValue(item,id) {
                    var msg = item.value;                  
                    $j(item).removeClass('info');
                    $j(item).removeClass('danger');
                    $j(item).removeClass('success');
                    if(id == 'TotalDomesticPercent' || id == 'OperatingExpAmount' || id == 'TotalPaymentDomesticPercent'){
                        if(msg !='' && msg != null){
                            $j(item).addClass('success');
                        }else{
                            $j(item).addClass('danger'); 
                        }  
                    }else{
                    	if(msg !='' && msg != null && msg !='0' && msg !=0){
                            $j(item).addClass('success');
                        }else{
                            $j(item).addClass('danger');
                        }     
                    }
                }  
		//Sets the title of the current tab to "Case Transactions Detail"
        window.onload = function setTitleConsole(){
            setTitle();
        }
        //Sets the title of the current tab to "Case Transactions Detail"
        function setTitle() {
            sforce.console.setTabTitle('Wallet by Domain');
        }
		function internetbanking(seq,e,section){
            var answer = e.value;    
            if(seq == 1 && answer == 'Yes'){
                if(section == 'Payment'){
                    $j('.internetbankingPayment').show();
                }else{
                    $j('.internetbankingCollection').show();
                }
            }else if(seq == 1 && answer != 'Yes'){
            	if(section == 'Payment'){
                    $j('.internetbankingPayment').hide();
                }else{
                    $j('.internetbankingCollection').hide();
                }    
            }
        }
 			 </script> 
    </body>

</apex:page>