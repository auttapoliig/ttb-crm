<apex:page standardController="Campaign" extensions="RTL_CampaignMemberReassignExtension" tabStyle="Campaign" 
    applyBodyTag="false" showHeader="false" standardstylesheets="true" lightningStylesheets="true">
<html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
    <head>
      <meta charset="utf-8" />
      <meta http-equiv="x-ua-compatible" content="ie=edge" />
      <title>{!$Label.RTL_Campaign_Reassign_Title}</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />

    <apex:includescript value="{!URLFOR($Resource.TMBjquery, '/TMBassets/jquery/jquery-1.11.2.min.js')}" />   
    <apex:includeScript value="/support/console/48.0/integration.js"/>
    <!-- <apex:stylesheet value="{!URLFOR($Resource.bootstrapsf1, 'dist/css/bootstrap-namespaced.css')}" /> -->

      <!-- Import the Design System style sheet -->
      <apex:slds />

      <style type="text/css">
/*        .msgIcon {
            display: none!important
        }
        .customMessage * {
            color: #fff!important
        }
        .customMessage {
            margin: 5px 0!important;
            max-width: 1280px;
            opacity: 1!important;
            width: 100%;
            font-size: 12px;
            border: 0px;
            padding-left: 10px;
        }
        .message {
        }
*/
        .btn {
            font-weight: unset;
        }
        .hideColumn{
            display: none;
        }
      </style>

      <style>
        .bootstrap-sf1{
            overflow: hidden;
        }
        .bootstrap-sf1 .paddingline{
                padding-top :.5rem;
        }
        .bootstrap-sf1{
            background-color: #FFF;    
        }
        .bootstrap-sf1 .btn-block {
            display: block;
            width: 100%;
            text-align: center;
        }
        .bootstrap-sf1 .padding-label {
                padding-right: 20px;
                float: left; 
                width: 40%; 
                text-align: right;
            }
        .bootstrap-sf1 .label-middle
        {
            /*margin-top: .400rem;*/
        }
        .bootstrap-sf1 .padding-values {
                float: right; 
                text-align: left; 
                width: 60%;
                padding-right: 15%;
        }
        .slds-scope table{
            width: auto;
        }
        .red-label {
            list-style: none;
            color: #f00;
        }

        .slds-scope .slds-text-title--caps, .slds-scope .slds-text-title_caps {
            font-size: .79rem !important;
        }

        .bootstrap-sf1 .output-label{
                    display: inline-block;
                    color: rgb(112, 110, 107);
                    font-size: 0.79rem;
                    line-height: 1.5;
                    margin-right: .75rem;
                    margin-bottom: 0rem;
                    font-weight: normal !important;
            }
            
        .messageText{
            padding-bottom: -5px;
          }

          .messageCell .messageText br{
            display: none;
          }

      </style>

    </head>

<body>

  <!-- REQUIRED SLDS WRAPPER -->
  <div class="slds-scope">

    <!-- MASTHEAD -->
    <!-- / MASTHEAD -->

    <!-- PAGE HEADER -->
    <div class="slds-page-header">

      <!-- LAYOUT GRID -->
      <div class="slds-grid">

        <!-- GRID COL -->
        <div class="slds-col slds-has-flexi-truncate">
            <!-- HEADING AREA -->
            <!-- MEDIA OBJECT = FIGURE + BODY -->
            <div class="slds-media slds-no-space slds-grow">
              <div class="slds-media__figure">
                <!-- <svg aria-hidden="true" class="slds-icon slds-icon-standard-contact">
                  <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/standard-sprite/svg/symbols.svg#campaign')}"></use>
                </svg> -->
						<!--<span class="slds-icon_container slds-icon-standard-campaign">
                          <svg aria-hidden="true" class="slds-icon slds-icon_medium">
                            <use xlink:href="{!URLFOR($Asset.SLDS, 'assets/icons/custom-sprite/svg/symbols.svg#custom101')}"></use>
                          </svg>
                          <span class="slds-assistive-text">Campaign Member Icon</span>
                        </span> -->
                  
                   <span class="slds-icon_container slds-icon-standard-campaign" style="width:32px;height:32px;" >
                             <span aria-hidden="true" class="slds-icon slds-icon_medium">
                          <img src="/apexpages/slds/latest/assets/icons/custom/custom101.svg"
                               style="width:100%;"
                               class="pageTitleIcon" title="Reassign Campaign Member" />
                            </span>
                        </span>
                  
                  
              </div>
              <div class="slds-media__body">
                  
                  <nav>
                        <ol class="slds-breadcrumb slds-line-height_reset">
                          <li class="slds-breadcrumb__item">
                            <span>{!$Label.RTL_Campaign_Reassign_Title}</span>
                          </li>
                        </ol>
                      </nav> 
                <h1 class="slds-page-header__title slds-m-right_small slds-align-middle slds-truncate" title="{!$Label.RTL_Campaign_Reassign_Subtitle}">
                    {! IF( isFromCampaign , CampMemObj.Campaign.Name , $Label.RTL_Campaign_Reassign_Subtitle ) }
                </h1>
              </div>
            </div>
            <!-- / MEDIA OBJECT -->
            <!-- /HEADING AREA -->
        </div>

        <!-- ACTION BUTTONS -->

        <!-- / ACTION BUTTONS -->

      </div>
      <!-- / LAYOUT GRID -->

    <!-- PAGE HEADER DETAIL ROW -->
    <!-- none -->
    <!-- / PAGE HEADER DETAIL ROW -->

    </div>
    <!-- / PAGE HEADER -->


    <!-- PRIMARY CONTENT WRAPPER -->


<!-- <apex:outputPanel id="messageSection"> -->
       
<!--     <apex:outputPanel id="messageblock" rendered="{! IF(PageMessage!='',true,false) }">
        <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning" role="alert">
            <span class="slds-assistive-text">{!$Label.RTL_Campaign_Reassign_Warning}</span>
            <h2>{!PageMessage}</h2>
        </div>
    </apex:outputPanel> -->
    
<!-- </apex:outputPanel> -->




<apex:form id="theForm">

     <apex:outputPanel id="statusMessage">
        <apex:pageMessages ></apex:pageMessages>
    </apex:outputPanel>

    <apex:outputPanel id="filterpanel">
        <apex:outputPanel id="filterblock" rendered="{!isSearchScreen}">
            <div class="slds-form-element">
  <!--               <h3 class="slds-section-title--divider slds-text-heading_small">
                    {!$Label.RTL_Campaign_Reassign_Filter_Section}
                </h3> -->
                <div class="slds-section__title slds-theme--shade primaryPaletteBorder">
                    <h3 class="section-header-title slds-p-horizontal--small slds-truncate">{!$Label.RTL_Campaign_Reassign_Filter_Section}</h3> 
                </div>
<!--                <div class="slds-grid slds-wrap slds-grid_pull-padded-medium slds-m-bottom_small slds-m-top_small" style="width: 100%;"> -->
                    <div class="bootstrap-sf1">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                              <span class="padding-label label-middle">
                                    <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_Filter_Campaign}" />
                                <!-- {! $Label.RTL_Campaign_Reassign_Filter_Campaign } -->
                                </span>
                              <div class="padding-values">

                                        <apex:outputfield value="{!CampMemObj.CampaignID}" id="CampaignID"  rendered="{!isFromCampaign}" />
                                        <apex:outputPanel rendered="{!isFromHomeScreen}">
                                        <div class="slds-select_container ">
                                            
                                            <apex:selectList value="{!CampMemObj.CampaignID}" multiselect="false" size="1" styleClass="slds-select" rendered="{!isFromHomeScreen}">
                                                <apex:selectOptions value="{!CampaignSelectOptionList}"  />
                                            </apex:selectList>
                                        </div>
                                        </apex:outputPanel>
                                </div>
                            </div>
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                                <span class="padding-label label-middle">
                                    <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_Filter_Chanel}" />
                                    <!-- <label>{! $Label.RTL_Campaign_Reassign_Filter_Chanel }</label> -->
                                </span>
                                <div class="padding-values">
                                    <div class="slds-select_container ">
                                        <apex:selectList value="{!selectedChannel}" multiselect="false" size="1"  styleClass="slds-select" >
                                            <apex:selectOptions value="{!campaignChannelSelectList}"  />
                                        </apex:selectList>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slds-grid slds-wrap">
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                                <span class="padding-label label-middle">
                                    <apex:outputlabel styleclass="output-label"  value="{!$ObjectType.CampaignMember.fields.RTL_Contact_Status__c.Label}" />
                                    <!-- <label>{!$ObjectType.CampaignMember.fields.RTL_Contact_Status__c.Label}</label> -->
                                </span>
                              <div class="padding-values">
                                    <div class="slds-select_container ">
                                        <!-- <apex:inputfield value="{!CampMemObj.RTL_Contact_Status__c}" styleClass="slds-select" /> -->
                                        <apex:selectList value="{!searchcamMemContactStatus}" multiselect="false" size="1" styleClass="slds-select" >
                                            <apex:selectOptions value="{!contactStatusSelectionList}"  />
                                        </apex:selectList>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                              <span class="padding-label label-middle">
                                <apex:outputlabel styleclass="output-label"  value="{!$ObjectType.CampaignMember.fields.RTL_Assigned_Zone_Rpt__c.Label}" />
                                    <!-- <label>{!$ObjectType.CampaignMember.fields.RTL_Assigned_Zone_Rpt__c.Label}</label> -->
                                </span>
                              <div class="padding-values">
                                        <apex:inputfield value="{!CampMemObj.RTL_Assigned_Zone_Rpt__c}" styleClass="slds-input"  rendered="{!isAllowChangeBranch}" />
                                        <apex:outputfield value="{!CampMemObj.RTL_Assigned_Zone_Rpt__c}" rendered="{!!isAllowChangeBranch}" />
  
                                </div>
                            </div>
                        </div>

                        <div class="slds-grid slds-wrap">
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                               <span class="padding-label label-middle">
                                <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_Filter_OfferResult}" />
                                    <!-- <label> -->
                                        <!-- {!$Label.RTL_Campaign_Reassign_Filter_OfferResult} -->
                                    <!-- </label> -->
                                </span>
                              <div class="padding-values">
                                    <div class="slds-select_container ">
                                        <apex:selectList value="{!selectedOfferResults}" multiselect="false" 
                                                         size="1" styleClass="slds-select" disabled="true">
                                            <apex:selectOptions value="{!offerResultSelectList}"  />
                                        </apex:selectList>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                                <span class="padding-label label-middle">
                                    <apex:outputlabel styleclass="output-label"  value="{!$ObjectType.CampaignMember.fields.RTL_Assigned_Branch__c.Label}" />
                                    <!-- <label>{!$ObjectType.CampaignMember.fields.RTL_Assigned_Branch__c.Label}</label> -->
                                </span>
                              <div class="padding-values">
                                        <apex:inputfield value="{!CampMemObj.RTL_Assigned_Branch_No_Filter__c}" rendered="{! isAllowChangeBranch }" id="assingedBranch" />
                                        <apex:outputfield value="{!CampMemObj.RTL_Assigned_Branch_No_Filter__c}" rendered="{! NOT(isAllowChangeBranch) }" />
                                </div>
                            </div>
                        </div>

                        <div class="slds-grid slds-wrap">
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                                <span class="padding-label label-middle">
                                    <!-- <label>{! $Label.RTL_Campaign_Reassign_Filter_Contact}</label> -->
                                    <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_Filter_Contact}" />
                                </span>
                              <div class="padding-values">
                                    <div class="slds-select_container">
                                        <apex:selectList value="{!selectedtype}" multiselect="false" styleClass="slds-select" size="1">
                                            <apex:selectOptions value="{!CampaignTypeSelectList}"  />
                                        </apex:selectList> 
                                    </div>
                                </div>
                            </div>
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                              <span class="padding-label label-middle">
                                    <!-- <label>{!$ObjectType.CampaignMember.fields.RTL_Assigned_Agent__c.Label}</label> -->
                                    <apex:outputlabel styleclass="output-label"  value="{!$ObjectType.CampaignMember.fields.RTL_Assigned_Agent__c.Label}" />
                              </span>
                              <div class="padding-values">
                                    
                                        <apex:inputfield value="{!CampMemObj.RTL_Assigned_Agent__c}" id="assingedAgent" />
                                </div>
                            </div>
                        </div>
<apex:outputPanel rendered="{!isAllowSeeUnassinged}">
                        <div class="slds-grid slds-wrap">
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">&nbsp;</div>
                            <div class="slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_6-of-12 paddingline slds-grid slds-grid_vertical-align-center">
                                <span class="padding-label label-middle">
                                    <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_Filter_Unassigned}" />
                                    <!-- <label>{!$Label.RTL_Campaign_Reassign_Filter_Unassigned}</label> -->
                                </span>
                                <div class="padding-values label-middle">
                                    <apex:inputCheckbox value="{!filterUnassignedMember}" id="unassignCheck" />
                                </div>
                            </div>
                        </div>
</apex:outputPanel>
                        <div class="row slds-m-around_x-small">
                            <div class="col-xs-12 col-sm-12 col-md-12 paddingline slds-grid slds-grid_vertical-align-center">
                                <div class="slds-align_absolute-center">
                                    <apex:outputPanel rendered="{!AllowedReAssign}"> 
                                        <apex:commandbutton value="{! $Label.RTL_Campaign_Reassign_Filter_Search_Btn }" action="{!searchCampaignMembers}"
                                                            status="loadStatus" 
                                                            reRender="resultblock"
                                                            id="searchbutton"  styleClass="slds-button slds-button--neutral slds-m-right_small slds-m-left_small" />
                                    </apex:outputPanel>
                                    <apex:commandButton value="{! $Label.RTL_Campaign_Reassign_Filter_Cancel_Btn }"   styleClass="slds-button slds-button--neutral slds-m-right_small " onclick="CloseCurrentTab();return false;"  /> 
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>                
            <!-- </div> -->
        </apex:outputPanel>

    </apex:outputPanel>


    <apex:outputPanel id="rellocatepanel">
        <apex:outputPanel id="rellocateblock"  rendered="{!isRelocateScreen}">

            <div class="slds-form-element">
                <!-- <h3 class="slds-section-title--divider slds-text-heading_small">
                    <label>{! $Label.RTL_Campaign_Reassign_Reassign_Section }</label>
                </h3> -->
                <div class="slds-section__title slds-theme--shade primaryPaletteBorder">
                    <h3 class="section-header-title slds-p-horizontal--small slds-truncate">{!$Label.RTL_CampaignMemberEdit_SecInformation}</h3> 
                </div>

                <div class="bootstrap-sf1">
                    <div class="row slds-m-around_x-small">
                        <div class="col-xs-12 col-sm-12 col-md-12 paddingline slds-grid slds-grid_vertical-align-center">
                          <span class="padding-label">
                            <!-- <label>{! $Label.RTL_Campaign_Reassign_SelectMem_Text }</label></span> -->
                             <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_SelectMem_Text}" />
                          </span>
                          <div class="padding-values">
                                <div class="slds-size_small">
                                    <apex:outputtext value="{!totalSelectedMembers}"  />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <!--     <h3 class="slds-section-title--divider slds-text-heading_small">
                    <label>{!$Label.RTL_Campaign_Reassign_Target_Section}</label>
                </h3> -->
            <apex:outputPanel rendered="{! !isReallocateSuccess}">
                <div class="slds-section__title slds-theme--shade primaryPaletteBorder">
                    <h3 class="section-header-title slds-p-horizontal--small slds-truncate">{!$Label.RTL_Campaign_Reassign_Target_Section}</h3> 
                </div>
            </apex:outputPanel>

                <div class="bootstrap-sf1">

            <apex:outputPanel rendered="{! !isReallocateSuccess}">
                    <div class="row slds-m-around_x-small">
                        <div class="col-xs-12 col-sm-12 col-md-12 paddingline slds-grid slds-grid_vertical-align-center">
                            <span class="padding-label">
                                <!-- <label>{!$Label.RTL_Campaign_Reassign_Target_Branch_Text}</label> -->
                                 <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_Target_Branch_Text}" />

                            </span>
                          <div class="padding-values">
                                <div class="slds-size_small">
                                    <apex:inputfield value="{!camMemReassign.RTL_Assigned_Branch__c}" styleClass="slds-size_small" rendered="{! isAllowChangeBranch }" />
                                    <apex:outputfield value="{!camMemReassign.RTL_Assigned_Branch__c}" rendered="{! NOT(isAllowChangeBranch) }" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row slds-m-around_x-small">
                        <div class="col-xs-12 col-sm-12 col-md-12 paddingline slds-grid slds-grid_vertical-align-center">
                          <span class="padding-label">
                             <!-- <label>{! $Label.RTL_Campaign_Reassign_Target_Agent_Text }</label> -->
                              <apex:outputlabel styleclass="output-label"  value="{!$Label.RTL_Campaign_Reassign_Target_Agent_Text}" />

                          </span>
                          <div class="padding-values">
                                <div class="slds-size_small">
                                     <apex:inputfield value="{!camMemReassign.RTL_Assigned_Agent__c}" styleClass="slds-size_small" />
                                </div>
                            </div>
                        </div>
                    </div>
            </apex:outputPanel>

                    <div class="row slds-m-around_x-small">
                        <div class="col-xs-12 col-sm-12 col-md-12 paddingline slds-grid slds-grid_vertical-align-center">
                            <div class="slds-align_absolute-center">

                                 <apex:outputPanel rendered="{! !isReallocateSuccess }">
                                    <apex:commandbutton value="{! $Label.RTL_Campaign_Reassign_Reassign_Back_Btn }" 
                                        action="{!backbutton}"
                                        status="loadStatus" rerender="messages,filterpanel,rellocatepanel,resultblock,statusMessage"
                                        id="backbutton"   
                                        styleClass="slds-button slds-button--neutral slds-m-right_small slds-m-left_small"
                                                    />
                                </apex:outputPanel>
                                <apex:outputPanel rendered="{! IF(AllowedReAssign && !isReallocateSuccess , true,false ) }"> 

                                     <apex:commandbutton value="{! $Label.RTL_Campaign_Reassign_Reassign_Btn }" action="{!reallocateAction}"
                                            status="loadStatus" reRender="messages,script_block,resultblock,paginationNumber,paginationNumberbottom,messageSection,statusMessage,rellocateblock"
                                            id="reallocatebutton"  
                                            styleClass="btn saveButtonId slds-button slds-button_brand slds-button slds-button--neutral slds-m-right_small slds-m-left_small" />

                                </apex:outputPanel>

                                <apex:commandButton value="{! IF( !isReallocateSuccess ,$Label.RTL_Campaign_Reassign_Filter_Cancel_Btn,$Label.RTL_Campaign_Member_History_Close_Btn ) }"  styleClass="slds-button slds-button--neutral slds-m-right_small slds-m-left_small"  onclick="CloseCurrentTab();return false;"  /> 


                            </div>
                        </div>
                    </div>


                </div>

                
            </div>

        </apex:outputPanel>
    </apex:outputPanel>

    <apex:outputPanel id="resultblock" >
        <div class="slds-form-element">
           <!--  <h3 class="slds-section-title--divider slds-text-heading_small">
                    {!if(isSearchScreen,$Label.RTL_Campaign_Reassign_Result_Section,$Label.RTL_Campaign_Reassign_Select_Section)}            
            </h3> -->
            <div class="slds-section__title slds-theme--shade primaryPaletteBorder">
                    <h3 class="section-header-title slds-p-horizontal--small slds-truncate">{!if(isSearchScreen,$Label.RTL_Campaign_Reassign_Result_Section,$Label.RTL_Campaign_Reassign_Select_Section)}  </h3> 
                </div>

        <apex:outputPanel rendered="{!campaignwrapperList.size=0}">
          <div class="slds-p-around_x-small slds-border_bottom slds-border_top">
            <span style="font-size: 12px;margin-left: 20px;">
              <apex:outputText value="{!$Label.RTL_No_Record_Display}" ></apex:outputText>
            </span>
          </div>
        </apex:outputPanel> 

        <apex:outputPanel rendered="{!campaignwrapperList.size>0}"> 
        
            <div class="slds-align_absolute-center slds-m-top_small" >
                <apex:commandbutton value="{!$Label.RTL_Campaign_Reassign_Reassign_Select_Btn}" action="{!selectMember}"  rendered="{!isSearchScreen}"
                                                    status="loadStatus" rerender="filterpanel,rellocatepanel,resultblock,statusMessage"
                                                    id="selectbutton" 
                                                    styleClass="btn saveButtonId slds-button slds-button_brand slds-button slds-button--neutral" />
                
            </div>

            <div class="slds-form-element">
                <div class="slds-form-element slds-m-around--medium"  id="responsive" >
                
            <apex:outputPanel rendered="{!isSearchScreen}" >
                    <div class="slds-grid slds-grid_vertical-align-start">
                        <div class="slds-p-horizontal_medium slds-m-bottom_small slds-m-top_small">
                            <apex:commandLink action="{!previous}" rendered="{! !DisablePrevious}" value="{! $Label.RTL_Campaign_Reassign_Prev_Text}" status="loadStatus"  reRender="loadStatus,resultblock,paginationNumber,paginationNumberbottom" /> 
                                <apex:outputText value="{! $Label.RTL_Campaign_Reassign_Prev_Text }" rendered="{!DisablePrevious}" />
                        </div>
                        <div class="slds-p-horizontal_medium slds-m-bottom_small slds-m-top_small">
                            <apex:commandLink action="{!next}" rendered="{! !DisableNext}" value="{! $Label.RTL_Campaign_Reassign_Next_Text}" status="loadStatus"  reRender="loadStatus,resultblock,paginationNumber,paginationNumberbottom" /> 
                            <apex:outputText value="{! $Label.RTL_Campaign_Reassign_Next_Text }" rendered="{!DisableNext}" />
                        </div>
                        <div class="slds-p-horizontal_medium slds-m-bottom_small slds-m-top_small">
                            <apex:outputText value=" ({!OffsetSize+1}-{!MaxNumoberofRecords} {! $Label.RTL_Campaign_Reassign_Of_Text} {!countTotalRecords})" id="paginationNumber"  />
                        </div>
                    </div>
            </apex:outputPanel>

                    <table class="slds-table slds-table--bordered slds-table--cell-buffer slds-max-medium-table--stacked-horizontal slds-table_fixed-layout" style="text-align: center;font-size: 12px; width: 100%;">
                        <thead>
                            <tr class="slds-text-title--caps slds-section-title--divider">

                                <th scope="col" class="{!if(isSearchScreen,'','hideColumn')}" >
                                    <div class="slds-cell-wrap" title="{! $Label.RTL_Campaign_Reassign_Head_Selection }">
                                        <apex:inputCheckbox onclick="selectAllCheckboxes();" value="{!isToggleSelectAll}" rendered="{!isSearchScreen}"   />  {! $Label.RTL_Campaign_Reassign_Head_Selection} 
                                    </div>
                                </th>

                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{! $Label.RTL_Campaign_Reassign_Head_No }">
                                        {! $Label.RTL_Campaign_Reassign_Head_No }
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{! $Label.RTL_Campaign_Reassign_Head_Name }">
                                        {! $Label.RTL_Campaign_Reassign_Head_Name }
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{! $Label.RTL_Campaign_Reassign_Head_Campaign }">
                                        {! $Label.RTL_Campaign_Reassign_Head_Campaign }
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.RTL_Contact_Status__c.Label}">
                                        {!$ObjectType.CampaignMember.fields.RTL_Contact_Status__c.Label}
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.RTL_Offer_Result__c.Label}">
                                        {!$ObjectType.CampaignMember.fields.RTL_Offer_Result__c.Label}
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.RTL_Campaign_Channel_formula__c.Label}">
                                        {!$ObjectType.CampaignMember.fields.RTL_Campaign_Channel_formula__c.Label}
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.RTL_Assigned_Branch__c.Label}">
                                        {!$ObjectType.CampaignMember.fields.RTL_Assigned_Branch__c.Label}
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.RTL_Assigned_Agent__c.Label}">
                                        {!$ObjectType.CampaignMember.fields.RTL_Assigned_Agent__c.Label}
                                    </div>
                                </th>
                                <th scope="col">
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.LastModifiedDate.Label}">
                                        {!$ObjectType.CampaignMember.fields.LastModifiedDate.Label}
                                    </div>
                                </th>

                                <th scope="col" class="{! IF(filterUnassignedMember,'','hideColumn' ) }" >
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.RTL_Originate_Branch__c.Label}">
                                        {!$ObjectType.CampaignMember.fields.RTL_Originate_Branch__c.Label}
                                    </div>
                                </th>
                                <th scope="col" class="{! IF(filterUnassignedMember,'','hideColumn' ) }">
                                    <div class="slds-cell-wrap" title="{!$ObjectType.CampaignMember.fields.RTL_Product_Name__c.Label}">
                                        {!$ObjectType.CampaignMember.fields.RTL_Product_Name__c.Label}
                                    </div>
                                </th>

                            </tr>
                        </thead>

                        <tbody>
                            <apex:repeat value="{!campaignwrapperList}" var="cml">
                                <tr class="dataRow">
                                    <td data-label="{! $Label.RTL_Campaign_Reassign_Head_Selection}" class="{!if(isSearchScreen,'','hideColumn')}" >
                                        <div class="slds-cell-wrap">
                                            <apex:inputCheckbox value="{!cml.Isselected}" id="selectcheck" rendered="{!isSearchScreen}" />
                                        </div>
                                    </td>
                                    <td data-label="{! $Label.RTL_Campaign_Reassign_Head_No }">
                                        <div class="slds-cell-wrap">
                                             {!cml.RowNumber}   
                                        </div>
                                    </td>
                                    <td data-label="{! $Label.RTL_Campaign_Reassign_Head_Name }">
                                        <div class="slds-cell-wrap">
                                             {!cml.FirstName} {!cml.LastName} 
                                        </div>
                                    </td>
                                    <td data-label="{! $Label.RTL_Campaign_Reassign_Head_Campaign }">
                                        <div class="slds-cell-wrap">
                                            {!cml.campaignmemberobj.Campaign.Name} 
                                        </div>
                                    </td>
                                    <td data-label="{!$ObjectType.CampaignMember.fields.RTL_Contact_Status__c.Label}">
                                        <div class="slds-cell-wrap">
                                            <apex:outputfield value="{!cml.campaignmemberobj.RTL_Contact_Status__c}" />
                                        </div>
                                    </td>

                                    <td data-label="{!$ObjectType.CampaignMember.fields.RTL_Offer_Result__c.Label}">
                                        <div class="slds-cell-wrap">
                                            <apex:outputfield value="{!cml.campaignmemberobj.RTL_Offer_Result__c}" />
                                        </div>
                                    </td>
                                    <td data-label="{!$ObjectType.CampaignMember.fields.RTL_Campaign_Channel_formula__c.Label}">
                                        <div class="slds-cell-wrap">
                                            <apex:outputfield value="{!cml.campaignmemberobj.RTL_Campaign_Channel_formula__c}" />
                                        </div>
                                    </td>
                                    <td data-label="{!$ObjectType.CampaignMember.fields.RTL_Assigned_Branch__c.Label}">
                                        <div class="slds-cell-wrap">
                                            <apex:outputfield value="{!cml.campaignmemberobj.RTL_Assigned_Branch__c}" />
                                        </div>
                                        
                                    </td>
                                    <td data-label="{!$ObjectType.CampaignMember.fields.RTL_Assigned_Agent__c.Label}">
                                        <div class="slds-cell-wrap">
                                             <apex:outputfield value="{!cml.campaignmemberobj.RTL_Assigned_Agent__c}" />
                                        </div>
                                    </td>
                                    <td data-label="{!$ObjectType.CampaignMember.fields.LastModifiedDate.Label}">
                                        <div class="slds-cell-wrap">
                                            <apex:outputfield value="{!cml.campaignmemberobj.LastModifiedDate}" />
                                        </div>
                                    </td>

                                     <td data-label="{!$ObjectType.CampaignMember.fields.RTL_Originate_Branch__c.Label}" class="{! IF(filterUnassignedMember,'','hideColumn' ) }">
                                        <div class="slds-cell-wrap">
                                            <apex:outputfield value="{!cml.campaignmemberobj.RTL_Originate_Branch__c}" />
                                        </div>
                                    </td>
                                     <td data-label="{!$ObjectType.CampaignMember.fields.LastModifiedDate.Label}" class="{! IF(filterUnassignedMember,'','hideColumn' ) }">
                                        <div class="slds-cell-wrap">
                                            <apex:outputfield value="{!cml.campaignmemberobj.RTL_Product_Name__c}" />
                                        </div>
                                    </td>


                                </tr>
                            </apex:repeat>
                        </tbody>
                    </table>

            <apex:outputPanel rendered="{!isSearchScreen}" >
                    <div class="slds-grid slds-grid_vertical-align-start">
                        <div class="slds-p-horizontal_medium slds-m-bottom_small slds-m-top_small">
                            <apex:commandLink action="{!previous}" rendered="{! !DisablePrevious}" value="{! $Label.RTL_Campaign_Reassign_Prev_Text}" status="loadStatus"  reRender="loadStatus,resultblock,paginationNumber,paginationNumberbottom" /> 
                                <apex:outputText value="{! $Label.RTL_Campaign_Reassign_Prev_Text }" rendered="{!DisablePrevious}" />
                        </div>
                        <div class="slds-p-horizontal_medium slds-m-bottom_small slds-m-top_small">
                            <apex:commandLink action="{!next}" rendered="{! !DisableNext}" value="{! $Label.RTL_Campaign_Reassign_Next_Text}" status="loadStatus"  reRender="loadStatus,resultblock,paginationNumber,paginationNumberbottom" /> 
                            <apex:outputText value="{! $Label.RTL_Campaign_Reassign_Next_Text }" rendered="{!DisableNext}" />
                        </div>
                        <div class="slds-p-horizontal_medium slds-m-bottom_small slds-m-top_small">
                            <apex:outputText value=" ({!OffsetSize+1}-{!MaxNumoberofRecords} {! $Label.RTL_Campaign_Reassign_Of_Text} {!countTotalRecords})" id="paginationNumberButtom"  />
                        </div>
                    </div>
            </apex:outputPanel>

                </div>
            </div>

        </apex:outputPanel>

        </div>

    </apex:outputPanel>

    <apex:actionFunction name="selectAllCheckboxes" action="{!toggleSelectAll}" 
                                reRender="resultblock,paginationBlock,thePageMessages"
                                 status="loadStatus" />
    <apex:actionFunction name="redirect" action="{!cancel}" />                    

</apex:form>

    <apex:actionstatus id="loadStatus">
        <apex:facet name="start">
            <div class="demo-only demo--inverse" style="height: 6rem;">
              <div class="slds-spinner_container slds-is-fixed">
                <div role="status" class="slds-spinner slds-spinner_medium">
                  <span class="slds-assistive-text">{$Label.RTL_Campaign_Reassign_Loading}</span>
                  <div class="slds-spinner__dot-a"></div>
                  <div class="slds-spinner__dot-b"></div>
                </div>
              </div>
            </div>
        </apex:facet>
    </apex:actionstatus>




    <!-- / PRIMARY CONTENT WRAPPER -->

    <!-- FOOTER -->
    <!-- / FOOTER -->

  </div>
  <!-- / REQUIRED SLDS WRAPPER -->    

<!-- JAVASCRIPT -->
<script type="text/javascript">
        var $j = jQuery.noConflict();
        var inconsole = sforce.console.isInConsole();
        var _maintab;
        var _subtab;


    function setTitle() {
        sforce.console.setTabTitle(' {! IF( isFromCampaign , CampMemObj.Campaign.Name , $Label.RTL_Campaign_Reassign_Subtitle ) } ');
    }  
        

    $j(document).ready(function(){ 

        if(inconsole){
            _maintab = sforce.console.getEnclosingPrimaryTabId(mainTab);
            setTitle();
            
            sforce.console.getEnclosingPrimaryTabId(function(result) {
                    if( result.id != 'null' )
                    {
                        sforce.console.setTabIcon("{!URLFOR($Resource.RTL_Reallocate_Campaign_Member_Logo)}", result.id);
                        
                    }
               
            	});
            
             sforce.console.getFocusedSubtabId(function(retsult){
                if(retsult!=null){
                    sforce.console.setTabIcon("{!URLFOR($Resource.RTL_Reallocate_Campaign_Member_Logo)}", retsult.id);
                }
              });
            
            
            
                
            
            
        }

        checkedUnassinged();

        $j('body').on('change','input[id$=unassignCheck]',function(){

            checkedUnassinged();
            
        });

        
    });
    
    function checkedUnassinged()
    {
        var assignedCheck = $j('input[id$=unassignCheck]').is(":checked");
        var assingedBranch = $j('input[id$=assingedBranch]');
        var assingedAgent = $j('input[id$=assingedAgent]');

                // var lookupButton = assingedBranch.parent().find('a');
                // console.log('gade:',lookupButton);

        if(assignedCheck)
        {
            if( assingedBranch.length == 1 )
            {
                assingedBranch.val('');
                assingedBranch.prop("disabled", true);
                //assingedBranch.closest('div').hide();

                var lookupButton = assingedBranch.parent().find('a').hide();
            }

            if( assingedAgent.length == 1 )
            {
                assingedAgent.val('');
                assingedAgent.prop("disabled", true);
                //assingedAgent.closest('div').hide();

                var lookupButton = assingedAgent.parent().find('a').hide();
            }
        }
        else
        {
            if( assingedBranch.length == 1 )
            {
                assingedBranch.prop("disabled", false);
                //assingedBranch.closest('div').show();
                var lookupButton = assingedBranch.parent().find('a').show();
            }

            if( assingedAgent.length == 1 )
            {
                assingedAgent.prop("disabled", false);
                //assingedAgent.closest('div').show();
                var lookupButton = assingedAgent.parent().find('a').show();
            }
        }
    }


    function reassignaction(){
              
        window.setTimeout(function(){
            CloseCurrentTab() 
        }, 2000);


    }

    
    
    

    
    function CloseCurrentTab() {
            //First find the ID of the current tab to close it
        if (sforce.console.isInConsole()) {
            sforce.one.navigateToURL('/one/one.app#' + btoa(JSON.stringify({
                 "componentDef": "c:workspaceAPIforVF",
                 "attributes": {
                   "action": 'close',
                 }
               })), true);
        }else{
            // redirect();
            sforce.one.back();
       }
    }

    function refreshPrimaryTabById() {
                //Get the value for 'scc-pt-0' from the openPrimaryTab method
                //This value is for example purposes only  
                
                 if (sforce.console.isInConsole()) {
                   
                        sforce.console.refreshPrimaryTabById(_maintab, true, refreshSuccess);
                }           
                
    }


        
    var closeSubtab = function closeSubtab(result) {
            //Now that we have the tab ID, we can close it
            var tabId = result.id;
            sforce.console.closeTab(tabId);
    };



    var subtab = function subtab(result) {
                //Now that we have the primary tab ID, we can close it
                _subtab = result.id;                               
            };


    var mainTab = function mainTab(result) {
                //Now that we have the primary tab ID, we can close it
                _maintab = result.id;                               
    };        


    var _navigateToUrl = window.navigateToUrl;  
    var navigateToUrl = function(url,data1,data2)
    {
        if(sforce.console.isInConsole())
        {

            tabName = '';
            sforce.console.getEnclosingPrimaryTabId(function(result) {
                if( result.id == 'null' )
                {
                    sforce.console.openPrimaryTab(null, url , true,tabName, null, 'salesforceTab');
                }
                else
                {
                    sforce.console.openSubtab(result.id, url , true, tabName, null);
                }
            });
        }
        else
        {
            _navigateToUrl(url,data1,data2);
        }
    }

    // $("a[id^=lookup]").on('click',function(event){
    //     if(sforce.console.isInConsole())
    //     {
    //         event.preventDefault();
    //         var objId = this.id.substring(6,21);
    //         var tabName = '';
    //         openTab(objId,'/',tabName);
    //     }

    // });

    function openTab(recid,url, tabName)
    {
        if(!sforce.console.isInConsole())
        {
            window.parent.location.replace(url+recid);
        }
        else
        {
            //always open new main tab
            // sforce.console.openPrimaryTab(null, url+recid, true,tabName, null, 'salesforceTab');
            sforce.console.getEnclosingPrimaryTabId(function(result) {
                if( result.id == 'null' )
                {
                    sforce.console.openPrimaryTab(null, url+recid, true,tabName, null, 'salesforceTab');
                }
                else
                {
                    sforce.console.openSubtab(result.id, url+recid , true, tabName, null);
                }
            });
        }
    }


    // Fix output field error in console when rendered
    var srcUp = function srcUp(url)
    {
      if(sforce.console.isInConsole())
      {
          var tabName = '';
          openTab('',url,tabName);
      }
    }

</script>

<!-- / JAVASCRIPT -->

</body>


</html>
</apex:page>